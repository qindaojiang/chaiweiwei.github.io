<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>wiki日报内容迁移 | vivi的蜡笔小男神</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="之前的工作日报是写在公司wiki上的，为了防治丢失现在移过来，都是前期在工作的时候遇到的小问题，总结了一下。">
<meta property="og:type" content="article">
<meta property="og:title" content="wiki日报内容迁移">
<meta property="og:url" content="https://github.com/chaiweiwei/2015/10/24/wikiri-bao-nei-rong-qian-yi/index.html">
<meta property="og:site_name" content="vivi的蜡笔小男神">
<meta property="og:description" content="之前的工作日报是写在公司wiki上的，为了防治丢失现在移过来，都是前期在工作的时候遇到的小问题，总结了一下。">
<meta property="og:image" content="https://github.com/chaiweiwei/assets/mou.png">
<meta property="og:updated_time" content="2016-03-02T09:38:28.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="wiki日报内容迁移">
<meta name="twitter:description" content="之前的工作日报是写在公司wiki上的，为了防治丢失现在移过来，都是前期在工作的时候遇到的小问题，总结了一下。">
<meta name="twitter:image" content="https://github.com/chaiweiwei/assets/mou.png">
  
    <link rel="alternative" href="/atom.xml" title="vivi的蜡笔小男神" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="https://avatars1.githubusercontent.com/u/11350373?v=3&amp;s=460" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">~vivi~</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Menu</li>
						<li>Tags</li>
						
						<li>Links</li>
						
						
						<li>Über</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/chaiweiwei" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/u/3674224937/home" title="weibo">weibo</a>
					        
								<a class="mail" target="_blank" href="/1119191759@qq.com" title="mail">mail</a>
					        
								<a class="linkedin" target="_blank" href="https://www.instagram.com/rou_vivi/" title="linkedin">linkedin</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">奥巴马的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">卡卡的美丽传说</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">本泽马的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">吉格斯的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">习大大大不同</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">托蒂的博客</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">我是谁，我从哪里来，我到哪里去？我就是我，是颜色不一样的吃货…</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">~vivi~</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="https://avatars1.githubusercontent.com/u/11350373?v=3&amp;s=460" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">~vivi~</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/chaiweiwei" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/u/3674224937/home" title="weibo">weibo</a>
			        
						<a class="mail" target="_blank" href="/1119191759@qq.com" title="mail">mail</a>
			        
						<a class="linkedin" target="_blank" href="https://www.instagram.com/rou_vivi/" title="linkedin">linkedin</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap"><article id="post-wikiri-bao-nei-rong-qian-yi" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/24/wikiri-bao-nei-rong-qian-yi/" class="article-date">
  	<time datetime="2015-10-24T07:33:11.000Z" itemprop="datePublished">2015-10-24</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      wiki日报内容迁移
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
        
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/日报/">日报</a>
	</div>


        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>之前的工作日报是写在公司wiki上的，为了防治丢失现在移过来，都是前期在工作的时候遇到的小问题，总结了一下。</p>
<a id="more"></a>
<h3 id="2015年3月2日-周一"><a href="#2015年3月2日-周一" class="headerlink" title="2015年3月2日 周一"></a>2015年3月2日 周一</h3><p>今天是第一天上班，因为个方面的原因推迟了报道时间。</p>
<p>今天没有和各位同事打招呼，有点可惜，又有点庆幸，但是该来的总要来的，觉得介绍自己的花名好难啊，Syros（希洛斯），觉得中午一起吃饭的薇薇安说的好，花名不好读还不如叫纽约什么的呢，既然这样就要希洛吧。</p>
<p>上午就是做了一点基础的电脑工作配置，完善了个人资料，今天打开工作邮件发现“新人报到必填-世界游”的个人资料群发了工作邮箱，瞬间羞羞哒啊，第一次写这种详细的公式简介。</p>
<p>临近中午约赛给了一个小例子先热热身，慢慢的熟悉代码，并且在考虑到项目需求的情况下，将代码多精雕细琢一点。尽量修改一些自己代码不规范的地方，</p>
<p>中午去吃了西安小吃，还挺好吃的，就是啦，江南小妹还是不行啊！以后还是叫外卖吧，公司应该是可以的吧？中午提前叫个外卖，万一早送来什么的。我还是有之前工作要睡午觉的习惯，不然下午敲代码意识集中不了，但感觉大家好像都不睡，有点不好意思，尽量调整生物钟吧。</p>
<p>下午尽快写好代码，约赛提出要修改的地方，虽然是很小的例子，但是可以熟悉一些公司iOS代码的编写方式，包括适配问题和@property之前不好的编写习惯。最大的收获就是github工具的使用，之前就将github平台当作搜索例子、查看代码的的单项利用方式了，现在能用sourceTree工具，新建、上传和共享等更多的享受github带给用户的便利功能了，但是在sourceTree的使用过程中我还要多练习，希望日后多用用，尽快的上手。trello平台的使用也很陌生，觉得界面很洋气。</p>
<p>我的日报就像打流水账，但是我感觉这样比较好记录一天的工作流程，如果有需要增加的日报报告关键点，之后再补上吧。</p>
<p>争取一天一点进步，积少成多。希望能在求攻略多些成长，自己也会努力的。</p>
<h3 id="2015年3月3日-周二-日报"><a href="#2015年3月3日-周二-日报" class="headerlink" title="2015年3月3日 周二 日报"></a>2015年3月3日 周二 日报</h3><p>哎，好像偷懒哦，现在还有约塞布置的一个英文网页的作业要看，心塞啊！内容到是不多，重点是英文，还有就是疑心病又犯了，不逐字逐句的看过去就是不放心啊，担心有什么落下了，跟老师划重点差不多，不放心，（老师总是会出点重点外的题目，来考你的拓展知识，都懂得）。但是今天过的真心充实啊。</p>
<p>上午，讲了网络相关的，模式跟之前的差不多，上手还是快的，就是一些封装好的要看看之前的代码，介绍了我之前没有用过的第三方库：MTLModel，对象封装就继承这个方法，能省略很多繁琐、重复的代码，要知道我之前都是纯手打加复制黏贴的,MBProgressHUD只有在之前学习iOS的用过一段时间，后来就用之前公司自己封装好的了，发现MBProgressHUD很方便啊，今天在看部分代码的时候发现了很多第三方库，感觉很高大上啊，不会写block、但是会用，代码大量的block啊，瞬间感觉iOS代码好年轻，看来自己有好多观念和编写习惯要改一下了，敲的敲的自己都变老了，不会进步。</p>
<p>之前在配置项目的时候出现过target的问题，幸亏我“好学好问”，抓住时机，又从师父的尊尊教诲中学到了很多，哈哈，虽然只是很少的Mac命令行数，但是感觉瞬间思路会清楚很多，弥补一些之前对Xcode配置认识缺失的部分，并且又学到一个很好用的工具imageOptim，无损压缩图片杠杠的。期间问了很多Mac电脑操作的键盘命令，作为iOS开发的不熟悉命令感觉很惭愧啊，总是依赖键盘或是触控板，只能慢慢积累了。</p>
<p>下午还是和之前一样做了一个小的功能，把上午的网络，第三方库应用进去，最喜欢的环节就是和师父的问答阶段了，可以指出我之前的编码坏习惯，哪一些地方是要注意的，约塞是怎么写的，改正、学习起来，幸亏我还是很厚脸皮的，师父一定要原谅我多次麻烦、打断你啊，。我还是一个好学生的。</p>
<p>完成小任务后，会提出一个新的项目需求，因为对公司iOS代码的不熟悉，只能在做练习的时候一点一点的相似的代码，模仿起来，现在我的新目标就是自动布局的学习，今天下午应该看了很久，只看了一半，在全部看完，能抓住自动布局的关键部分后，再考虑做新设计的UI布局，毕竟这和我之前纯写代码的方式不同，之前写的时候都没有注意到自动布局的问题，希望做起来能事半功倍一点，这样在练习完成后和师父的问答环节才能更加有效率啊。<br>每天进步一点点啊！</p>
<h3 id="2015年3月4日-周三-日报"><a href="#2015年3月4日-周三-日报" class="headerlink" title="2015年3月4日 周三 日报"></a>2015年3月4日 周三 日报</h3><p>今天还是好充实啊，上午趁着一点时间把昨天遗留的英文学习资料看完了，但是还是有一些问题，把他记录下来，请教约塞帮忙解答，按照文本的教案在实际操作的时候总是会有点偏差，可能会缺看一些步骤，再把一些不是很清楚的再过一遍，不过还是要在实战中解惑的。上午总算是对自动布局有了一定的了解，］</p>
<p>花了1个多小时的时间解决了昨天遗留的问题，中午就开始根据设计图构思布局设计了，因为没有具体的接口描述，我按照我之前的变成习惯虚构了一些数据，在这之前我仔细的查看了之前给视图的代码，在此基础上修改，尽量保持源代码的编写习惯。期间有一些小疙瘩，代码封装的好好，头一看可能找不到源头，但是仔细的研究一下，存在总是有理由的，方法的衔接都是合理的，还有好多的block封装，思路都是和之前完全不同的，值得好好模仿、学习。我之前写代码都是为了快速、完成任务，有结果就好，过程的精致也是很重要的。</p>
<p>在用xib描述Cell的过程中，因为我实际操作自动布局不是很熟练，时不时的出现一些问题，或是没有考虑全面，拖拉、删除一直循环多次，但这样也好，对自动布局的操作熟练很多，知道怎么查看、修改，做了两个新的Cell，花了好久，总算是可以看了，基本满足设计图的尺寸，今天午觉也没有睡、值得鼓励啊，一不小心出现了问题，在LoadXib的时候总是崩溃，自己找了很久，实在找不出了，检查了很多次的自动布局和代码，都没有问题，只有求助师父了，花了一点时间，结果还是target的问题，每创建文件.m和.xib都要把所有的target打勾，除了.h文件，不然main找不到文件，晕死，总算是运行成功了。好，开始根据展示的样式重新修改自动布局的设置，不知道别人怎么样，我都不能一次成功，总是要不断的检查和调整。天啊，又遇到了问题，UILabel的高度总是不能根据内容的宽度调整，就是不对，求助约塞，其中size.width+1的解决方法很快就找到了，因为UILabel在计算高度的时候就小数点四舍五入（差不多这样吧，知道大概的意思），可能计算高度的时候差那么1px，好，继续运行，解决一个问题，另一个问题出现了，当Content很长的时候UILabel不能自动换行，就算在自动布局中约束了高度&gt;=0（多行），还是不行，算出来有800的宽度，好吧，皇天不负有心人，师父还是神啊，找到了解决方法，label需要用preferredMaxLayoutWidth参数来描述文本最大的宽度，总算是成功了，展示的样子总算是跟上设计稿了，还有很多细节，字体大小，颜色等等之后可以润色。我感觉我总是能遇到很多稀奇古怪的问题，但这样好，才能进步。</p>
<p>在看代码的时候，配合约塞的讲解，对UITableView的认识又多了，知道了一些之前没有用过的但是很实用的方法，包括计算Cell高度的SystemLayoutsSizeFittingSize，真的超方便，再也不用一个个的去计算高度了，现在还不能说对代码滚瓜烂熟，但是之后的多次练习一定能手打熟练起来的，之前都是大量的复制黏贴，观察师父的习惯，很少复制嘛，就算相似的代码就在上面几行，这样就很熟练了，不会过段时间就忘记，只是有印象说：哦，好像这段代码相似的在这一块。</p>
<p>之前说对block不是很了解，借这次机会呦按钮的动作操作，师父顺便加了一下block，返现还是挺简单的，只要对block的工作原理有了解，借代码的实际练习，还是能很快上手的。我是属于那种别人讲一次，自己要按照自己的思维方式要理解一次、过一次的人，做到自己的记忆方法，不知道别人怎么做，还好我“聪明伶俐”，答上了约塞的问题：cell的复用，，很重要呢，幸亏我之前在理解cell图片的sd_cancelCurrentAnimationImagesLoad取消当前图片加载方法中脑子过了一下，对cell的复用还是很重视的。</p>
<p>还有很多细节想不起来了，之后可以记录一下，方便日报的总结。</p>
<p>一天进步一点点啊！️</p>
<h3 id="2015年3月5日-周四-日报"><a href="#2015年3月5日-周四-日报" class="headerlink" title="2015年3月5日 周四 日报"></a>2015年3月5日 周四 日报</h3><p>今天做了一个整合了之前学习的例子，自动布局和自己写的标签的布局算法，途中有坎坷是必然的，我把他分成了：1.自动布局特殊情况下的欠缺考虑 2.技术点上的错误 3.自身计算上失误。</p>
<ol>
<li><p>今天做的练习其实不难，就是要考虑很多东西，把之前的xib的自动布局加上，一开始还是很顺利的，当我开始添加数组数据，展示效果的时候发现我设置的标签的View结构有问题，一直不能自动布局他的高度，检查很很多次，约束条件都没有出问题，在查找问题的时候换了很多种思路，其中还出了“笑话”，调试的时候发现tagView的高度一直不变，脑子一下子没有转换过来，没有把自动布局的认识记到骨子里，又傻傻的去计算了view的高度，手动的改变了view的size，发现还是不对啊，这只是其中的一种方式，中间还转换了很多次，浪费了很多时间，但是这个时间也锻炼了我使用属性方法，心中保存另一种编写思路，塞翁失马，焉知非福啊，问了师父，好吧，猜到我会产生这个问题了，那我往好处想：是不是我的实现思路是对的，所以才和师父的思路认知对上了啊，哈哈，讲解后，豁然开朗啊，我也是醉了，没有想到这个问题，tag标签添加在view中，tags和view之间并没有进行自动布局，自然view的高度就不知道怎么算了，我说呢，怎么总是那么高啊，我好傻傻的去手动的改变高度，因为view控件与其他空间的约束，使得我的高度设置没有奇效，好吧，下次注意，这是我之前简单的自动布局练习中没有想到的地方，有欠考虑的，还好及时弥补。</p>
</li>
<li><p>好，今天在进行cell内部的按钮行为的时候用到了block，现在要转换意识，代理向block转换的意识，一下手还有点疙瘩，多敲敲就好了，这下问题出来了，我根据之前的学习，就敲了@weakify(cell),也是醉了啊，这是我新创建的项目，没有之前的配置，我说呢怎么一直红叉叉，请教了师傅，用了__weak 控件类型 ＊名称 ＝ cell ,弱引用一下，解决了。在写block体的时候加深了我对NSArray和NSMutableArray的认识，在添加数据的时候一直报NSArrayI….的错误，好吧，原来是NSArray用copy，而NSMutableArray要用strong修饰，NSMutableArray不同，不时数值的单纯拷贝，这样类型就变成NSArrayM了，就正确了，程序鞥运行起来了。</p>
</li>
<li><p>最后在与设计图调整view高度的时候发现总是多出来10Px的高度，我几个计算方法都重新检查了好几次，都是65，正确的高度，但显示就是高了10，最后脑子一转，发现了问题，之前手算cell高度的时候算错了，多了10，120P算成了130Px，好吧，我也是醉了。还好是自己检查出来的，不然就看笑话了。<br>我感觉我写代码，60%是在编写代码，40%都是在找问题啊，调试啊，哈哈，好吧。</p>
</li>
<li><p>这个例子需要自己可以添加标签，这就存在表Reload的问题，还有按钮点击后取消的问题，还好，我还是比较思考问题还是比较全面的，就是在思考算法的时候想了很久，最后还是用了NSDictionary字典的方式来存在多个按钮的惦记状态，到时候传值的时候只要去便利一下数组，在数组中的可能是点击选择的，到时候用字段去判断一下就好了，但不在该数组中的一定是没有被选择的，吓死我了，还以为不能成功呢。</p>
</li>
</ol>
<p>哈哈，今天圆满结束。“领导”讲话的环节就不描述了啊，师父领进门，修行靠个人，是真理不是！</p>
<h3 id="2015年3月6日-周五-日报"><a href="#2015年3月6日-周五-日报" class="headerlink" title="2015年3月6日 周五 日报"></a>2015年3月6日 周五 日报</h3><p>时间过的好快，一周过去了，明天周六，还好这周是双休，明天一定要好好的睡个懒觉。</p>
<p>感觉过的好充实，不知不觉时间就过去了，这一周学到的东西好多，就说今天把，做搜索界面的时候之前一直用UITextField文本框的方法在做，没有去细想，原来有更好的控件可以实现该功能：UISearchDisplayController,一开始我找的的UISearchBar,后来发现有个小图形一直不能修改，无法和效果图做的一直，醉了，后来发现是用的控件不对，有种接触新的复杂控件有点不安心的感觉，不像老师上课，能面面俱到，自己看可能会遗漏一点，就说我在实现的时候就发现了很多问题，之前的范例代码都是讲搜索bar放在了表头，我在按照步骤实现的时候发现没有遮盖，原来是没有将search的表覆盖上去，所以也显示不出来效果。这个问题折腾了好久，我把他归结为我对UISearchDisplayController空间的使用还不是很理解的。后来有了师父差不多范例的代码，我仔细的看了一下，排除与UISearchDisplayController一起使用的NSFechedResultsController其他跟数据相关的还没有细看，感觉好复杂，当用的时候在看好了，最终还是出现了，能够显示出了遮盖，但是效果不尽如人意，搜索栏把返回键遮住了，而且多了一个导航栏高度的空白，只能一个个的调，这个是我自己解决的，哈哈，试了好多，后来发现设置返回键与说明搜索栏位置的语句顺序是会有影响的，将搜索栏放置在当行栏只需要说明displaySearchBarInNavigation的属性为Yes，并且要放在添加返回键的前面，这样就不会遮住了.多处导航栏高度的问题只能说是自己自作聪明吧，之前问到了edgesForExtendedLayout的用处，因为计算高度的问题，这里我也手贱的添加了，其实不用。</p>
<h3 id="2015年3月6日-周五-日报-1"><a href="#2015年3月6日-周五-日报-1" class="headerlink" title="2015年3月6日 周五 日报"></a>2015年3月6日 周五 日报</h3><p>时间过的好快，一周过去了，明天周六，还好这周是双休，明天一定要好好的睡个懒觉。</p>
<p>感觉过的好充实，不知不觉时间就过去了，这一周学到的东西好多，就说今天把，做搜索界面的时候之前一直用UITextField文本框的方法在做，没有去细想，原来有更好的控件可以实现该功能：UISearchDisplayController,一开始我找的的UISearchBar,后来发现有个小图形一直不能修改，无法和效果图做的一直，醉了，后来发现是用的控件不对，有种接触新的复杂控件有点不安心的感觉，不像老师上课，能面面俱到，自己看可能会遗漏一点，就说我在实现的时候就发现了很多问题，之前的范例代码都是讲搜索bar放在了表头，我在按照步骤实现的时候发现没有遮盖，原来是没有将search的表覆盖上去，所以也显示不出来效果。这个问题折腾了好久，我把他归结为我对UISearchDisplayController空间的使用还不是很理解的。后来有了师父差不多范例的代码，我仔细的看了一下，排除与UISearchDisplayController一起使用的NSFechedResultsController其他跟数据相关的还没有细看，感觉好复杂，当用的时候在看好了，最终还是出现了，能够显示出了遮盖，但是效果不尽如人意，搜索栏把返回键遮住了，而且多了一个导航栏高度的空白，只能一个个的调，这个是我自己解决的，哈哈，试了好多，后来发现设置返回键与说明搜索栏位置的语句顺序是会有影响的，将搜索栏放置在当行栏只需要说明displaySearchBarInNavigation的属性为Yes，并且要放在添加返回键的前面，这样就不会遮住了.多处导航栏高度的问题只能说是自己自作聪明吧，之前问到了edgesForExtendedLayout的用处，因为计算高度的问题，这里我也手贱的添加了，其实不用。看完范例代码，总结了一下UISearchDisplayController的特点，之前一直搞不清楚自己的创建的tableview和search的tableview的区别，后来问了一下师父，其实他们之间并没有必然的联系，证实了自己的想法，都是有自己的数据源，只是用同一套的回调方法，因为UISearchDisplayController有自己的UISearchBar控件，他自己继承了搜索栏文本改变的回调方法，使得我们在使用的时候很方便。一切都有一定的了解后，调试出现了一个要敲自己脑袋的问题，我只注册了tableview的cell，没有注册UISearchDisplayController的cell，他们的使用是一样的，导致searchTableView的cell创建一直失败，在和师父一起找这个问题的时候，灵光一闪啊，就痛了，那成就感啊，满满的。</p>
<p>最后还学到了一个小技巧，就是设备分辨率的问题，特别是6+，是3倍的大小，3个位代表1个像素。[UIScreen mainScreen].scale就能得到值，我是在绘制cell的下划线的时候发现的，6和6+的显示效果不一样，师父说是设备分辨率的问题，我在设置线的高度的时候就写了0.5px，正常方法应该是（1/[UIScreen mainScreen].scale），这样显示的效果就一样了，这里要提醒的是当tableview有footerView的时候，最后一个cell的默认格式下划线时没有的，要自己绘制上去。</p>
<p>哈哈，一周结束了，明天又是新的一天。再接再厉。️</p>
<h3 id="2015年3月7日-周一-日报"><a href="#2015年3月7日-周一-日报" class="headerlink" title="2015年3月7日 周一 日报"></a>2015年3月7日 周一 日报</h3><p>又上班了，愉快的周末过去了，今天差点迟到。</p>
<p>今天工作做的比较快，师父还夸我了呢，哈哈，好开心。上午的工作比较简单，就改一个界面，下午也是改界面，但是难一点，有一点逻辑上的思考，要将多个控制器的数据集中到一个视图进行统一的通信。我边写边想啊，可能脑子短路了，就进到一个通道就一直出不来了，用字典的方法在记录可能存在的情况，简单讲就是多选按钮的状态，但是要考虑好多的，但是方法都差不多，因为要能自己添加标签按钮，好吧，我好不容易思路整理好了，程序运行成功，效果perfect，师父一过目就感觉还是繁琐的，有更简单的方法，我用的是修改，修改原来选中状态后没有选择的情况，我们在讨论的时候，约塞，一语中的啊，为什么不用删除，彗星撞击了我的大脑，一点通，那样就简单好多，我感觉当时我就一直钻，进到了死胡同出不来，只能按那种逻辑思路写下去，没有考虑过其他的情况，还有就是，我认为这和我之前的编写思路捆绑在一起了，我之前怎么写，现在还是怎么在思考逻辑算法，没有去尝试新的方式，转个弯海阔天空，我后来一整理代码，省略了好多的代码啊，很对都被我变的复杂了，我也是醉了，死的心都有了，反省自己怎么想不到呢。</p>
<p>在检查代码的时候，师父指出了一些可以改进的地方，关于对for循环的优化方式和字典的表示方式，转繁为简。数组的containsObject方法是我之前没有用过的，现在一用好方便啊，能检查数组中是否存在对象，省掉了我好多的for循环检查，NSPredicate的过滤功能，能很方便直观的用evaluatedObject过滤出符合条件的数组，代码中太多的for循环看上去太麻烦，而且也不高效。</p>
<p>最中意的是，我还运用了block来传递值，通过自己的思考，在我认为合适的地方实现block，师父检查了，应该没有什么问题。多多练习，天天向上。</p>
<p>今天最震惊的是公司进口了好多的食物啊，师父拿了好大的高乐高，瞬间觉得自己做昨天买的两盒速溶咖啡太不健康了啊。晚上还吃了公司提供的加班餐点，好开心，最喜欢干过包心菜了，明天又会高高兴兴上班了啊！</p>
<h3 id="2015年3月10日-周二-日报"><a href="#2015年3月10日-周二-日报" class="headerlink" title="2015年3月10日 周二 日报"></a>2015年3月10日 周二 日报</h3><p>啊呀，今天差点忘记写日报了，利用下班的时间，在写论文，一不小心时间就过来，还好抓住了时间的尾巴。</p>
<p>今天脑子好乱的，看的代码不多，就是脑子用的多，今天还睡了一个午觉，怎么说呢，之前就对UICollectionView不是很熟悉，只用过一两次，使用方法不是很深入，因为周三师父就要“远行”了，我要自己完成一个“复杂”的首页的设计，咋说呢，看上去不是很难，花点时间就能做出效果，但那事建立在使用表的基础上的，因为比较熟练了，但是也想有长进，准许师父的建议，使用UICollectionView来布局，这样扩展性好一点，方便之后的改版，师父说的没错！（点头），默默的看了差不多一天的代码，虽然是之前的就代码，但是还是很佩服约塞的编程逻辑啊，要是我写，我感觉我是不太可能写的那么清楚，虽然看的很吃力，但是代码风格很优雅，清楚啊，名称命名也是，这是我要好好学习的地方，之后要好好的规范起来，学习代码的时候可能觉得跳来跳去的，但是仔细一想就是这样封装的，因为iOS是将主攻略和分攻略合在一个代码中，并且程序是适配pad的，需要涉及到一些尺寸的计算，就这个问题，问了师父好多，问问这个为什么是这个值，那个为什么是这个值，。我花了好多的时间在思考之前的布局呢，花的时间是值得的，至少想到了很多的布局技巧，也重新温习了UICollectionView，<br>最喜欢的求攻略app的就是界面设计了，觉得很高大上啊，虽然用户看上去很简洁，使用很方便、但是开发起来有很多小细节要处理好，在iOS端更甚。之前一直很喜欢weather的界面设计，并且一直在苦苦的寻找蒙板的使用，无巧不成书，这里就有，约塞还介绍了两篇很好的，详细介绍了weather界面的布局设计，就在之前推荐给我的Raywenderlich网站上，哈哈，又有英文练习作业了，这下要放放我的韩剧了。我感觉我自己去Raywenderlich网站上找学习资源感觉自己不是很主动，还是拜托师父多推荐吧，感觉有目的性一点。</p>
<p>明天就要实战了，将我脑子中新设计的布局写出来，对UICollectionView练练手，还有明天师父还在，有问题还可以问问，对自己最大的挑战是怎么讲代码很好的封装起来，布局使用的方法正确，使用起来合理，方法也放在合适的地方，命名也规范。一定要纵观全局，等师父回来完善了通信，我写的关键代码只需要传关键的数据就能正确编译，好紧张，怕写的不好，师父回来检查过还要花半天的时间改，就得不偿失了，一定要天天夸夸自己啊，给自己加加油。</p>
<h3 id="2015年3月10日-周二-日报-1"><a href="#2015年3月10日-周二-日报-1" class="headerlink" title="2015年3月10日 周二 日报"></a>2015年3月10日 周二 日报</h3><p>啊呀，今天差点忘记写日报了，利用下班的时间，在写论文，一不小心时间就过来，还好抓住了时间的尾巴。</p>
<p>今天脑子好乱的，看的代码不多，就是脑子用的多，今天还睡了一个午觉，怎么说呢，之前就对UICollectionView不是很熟悉，只用过一两次，使用方法不是很深入，因为周三师父就要“远行”了，我要自己完成一个“复杂”的首页的设计，咋说呢，看上去不是很难，花点时间就能做出效果，但那事建立在使用表的基础上的，因为比较熟练了，但是也想有长进，准许师父的建议，使用UICollectionView来布局，这样扩展性好一点，方便之后的改版，师父说的没错！（点头），默默的看了差不多一天的代码，虽然是之前的就代码，但是还是很佩服约塞的编程逻辑啊，要是我写，我感觉我是不太可能写的那么清楚，虽然看的很吃力，但是代码风格很优雅，清楚啊，名称命名也是，这是我要好好学习的地方，之后要好好的规范起来，学习代码的时候可能觉得跳来跳去的，但是仔细一想就是这样封装的，因为iOS是将主攻略和分攻略合在一个代码中，并且程序是适配pad的，需要涉及到一些尺寸的计算，就这个问题，问了师父好多，问问这个为什么是这个值，那个为什么是这个值，。我花了好多的时间在思考之前的布局呢，花的时间是值得的，至少想到了很多的布局技巧，也重新温习了UICollectionView，<br>最喜欢的求攻略app的就是界面设计了，觉得很高大上啊，虽然用户看上去很简洁，使用很方便、但是开发起来有很多小细节要处理好，在iOS端更甚。之前一直很喜欢weather的界面设计，并且一直在苦苦的寻找蒙板的使用，无巧不成书，这里就有，约塞还介绍了两篇很好的，详细介绍了weather界面的布局设计，就在之前推荐给我的Raywenderlich网站上，哈哈，又有英文练习作业了，这下要放放我的韩剧了。我感觉我自己去Raywenderlich网站上找学习资源感觉自己不是很主动，还是拜托师父多推荐吧，感觉有目的性一点。</p>
<p>明天就要实战了，将我脑子中新设计的布局写出来，对UICollectionView练练手，还有明天师父还在，有问题还可以问问，对自己最大的挑战是怎么讲代码很好的封装起来，布局使用的方法正确，使用起来合理，方法也放在合适的地方，命名也规范。一定要纵观全局，等师父回来完善了通信，我写的关键代码只需要传关键的数据就能正确编译，好紧张，怕写的不好，师父回来检查过还要花半天的时间改，就得不偿失了，一定要天天夸夸自己啊，给自己加加油。</p>
<h3 id="2015年3月11日-周三-日报"><a href="#2015年3月11日-周三-日报" class="headerlink" title="2015年3月11日 周三 日报"></a>2015年3月11日 周三 日报</h3><p>今天是在昨天的基础上在整理思路，做完工具的cell，瞬间开阔了很多，之前一直在纠结怎么在UICollectionView的cell里面装横向滑动的多行布局，我就在cell里面又加了一个UICollectionView，要改变方向重要改变FlawLayout的Scroller方向就好了，运行一看，只有一行！这是重点，后来想说用自定义的布局，但其实没有那么麻烦，我也是在一个机缘巧合下面发现的，原本想先放一放，先布局下面的组，好的吧，等我讲第二个做出来的时候，想看看在pad中的适配效果，一打开，眼角一瞥，发现第一组的工具cell变成两行了，感觉看看什么什么问题，心里想的是可能是高度了，pad的高度高，拉伸就显示了，我试试改变了高度，发现iPhone中的cell也好了，变成多多行横向滑动了，一仔细看了一下计算的高度，天，我又粗心大意了，cell的高度我只算了内部UICollectionView的高度，没有下面的pageController的高度，重新修改，就正确了，这个问题没有发现的话，我没准明天还要花半天的时间在上面，布局时没有问题了，可能工具的排序有点问题，明天在揪细节，今天先把总体的布局线做出来，我感觉要是以前，我肯定是完不成那么复杂的布局的，还有就是今天运气也不错，哈哈。</p>
<p>今天工作一天下来，我只剩两个section没有布局完，明天上午应该能完成总体的布局，之后就是逻辑上的问题了，还有数据的封装，好开心，至少“精通”了点UICollectionView，算入门了。师父又夸我了。<br>明天就是我要一个人奋战了，相信自己没有问题的。还制定了计划，之前布置weather布局还没有练习，哦对了，还有图片的透明渐变效果，约塞也找资源，等我布局完成了，再来扣细节，看一下怎么完成透明渐变的效果。</p>
<p>最后就是感觉自己搜索总是咋不住重点，都搜不到，但是师父一搜就找到了，哈哈，看来还是要积累的，看了图效果就是想不出“渐变”这个词，总是蒙版蒙版的，也是醉了。</p>
<p>加油，工作的好开心，很自由。喜欢，保持下去，之前一个月的实习试用通过啊。</p>
<h3 id="2015年3月12日-周四日报"><a href="#2015年3月12日-周四日报" class="headerlink" title="2015年3月12日 周四日报"></a>2015年3月12日 周四日报</h3><p>今天主要是完成了效果图的全部布局，但是还有一些细节要处理，如工具cell中的布局，排列计算要好好的想一想，在师父旅游回来前解决不了，只有拜托约塞了，还有中间的横线，我感觉自己十有八九是有问题的，这两个是遗留的比较有问题的地方。</p>
<p>上午把主要的布局都完成了，下午就是在完成图片布局的适配和pad设备的适配，师父说pad的适配让我自由发挥，好吧，差一点在适配的时候又陷入混乱了，记不清什么时候要按比例等高了，还要在我反复的试验和调试下，还是弄清楚了，我现在就是设置pad设备上的cell高是不变的，在按iPhone上的cell数量的双倍适配在ipad设备上，还有要注意的是，如果是图片要注意等比例的适配，这样就有问题了，特别是在pad上，因为我在布局的时候有section里面的cell装了另一个UICollectionView,因为cell的个数不一样，按照宽度来等比分的，因为高度固定，cell中有图片所以要等比，不然会拉伸，算出来的高度可能会比superview高一点点，特别是有描边效果的cell。不过在我百般的折腾下还是解决了，出乎意料的是该问题出现在了4寸和其以上尺寸的iPhone设备上，我只有用非常手段解决了，回来要好好的问问师父。</p>
<p>还有就是在处理view的透明渐变问题上，CALayer是不能使用自动布局的，添加的效果view的尺寸不能动态的跟随设别的尺寸改变，所以渐变层出现小的效果总是短一截，我对view的涉及的初始方法不是很了解，不知道view真正根据设备修改了宽高是哪个方法，也不知道怎么搜索正确，我只能手动的修改CALayer的高度，感觉很暴力，不是很优雅，但效果时出来了。</p>
<p>明天的主要任务是把测试数据先写一写，修改逻辑，这里就可以把怎样传值的封装分体考虑进去了，感觉可能布局还是会有点问题，还是要修改，这个首页设计的好复杂，但是挺好看的。</p>
<h3 id="2015年3月13日-周五-日报"><a href="#2015年3月13日-周五-日报" class="headerlink" title="2015年3月13日 周五 日报"></a>2015年3月13日 周五 日报</h3><p>今天有个意外的进展，数据没有用测试的哦，写了接口，花了一点时间改了代码，测试数据的话真心不知道参数是什么，到时候真实数据的时候改的更多，其中有1两张图片没有，效果可能看不到图片效果，但他是存在的，还有就是调了接口，有一个最近地点poi的接口没有，或者是客户端这边处理，不清楚怎么弄，等师父回来再说，有几个设计的需求和后台这边的需求有冲突，可能哪边要修改一下，添加个参数传过来什么的。</p>
<p>现在有最大的三个问题，明天或者遗留下来待解决：</p>
<ol>
<li>第一个Header上面的天气预警位置一直不正确，特别是在变换位置的时候。</li>
</ol>
<p>2.还是工具cell上面，今天才发现有四项Tools是固定的，需要手动插入到数据中，这样又多了一块算法的处理，今天本来还在纠结怎么重新调整cell的顺序，问了格林和马丘，本来是想参考一下安卓的方法的，后来发现原来自己还没有搞清楚需求，也是醉了，后来在马丘的详细讲解下，对大致的思路有了方向，可能我之前有看到工具列表取值的那一块，但是就没往深处想，也没有仔细看，一想拿到数据就好了，没有看之前师父写的后续的修改和添加的本地工具对象，也是粗心大意了，还好讲的详细，明天又有的折腾了呢，感觉进度比我想的慢。</p>
<ol>
<li>有的时候需要隐藏掉其中的section，本来想模仿之前师父的方法，但是细想一下，比较麻烦，之前约塞的例子是section比较少，所以可以那么简单的计算，还好还是有解决方法的，我本来是有想到的，就是section的数量是固定的，就改变section里面的cell数量就可以了，但是一试，崩了，这下慌了，没有往细想，但是在马丘的坚持下，还是觉得这是可行的，问题可能就出现了某个第三方错误上了，因为那个FDR的error提示之前看到了约塞改了，感觉好像没有关系，只是为了cell的边缘线准备的，我具体也不知道哪里出问题了，但是把FDR前缀的布局类型和cell类型都改成常规的UICollectionviewCell什么的就能按之前的思路写了，就是section数目固定，只改变item in section中的值。这样做就要考虑section的header的问题le ，本来还信心满满的说，马代码超快的，在计算headersize的方法里面将头的高度随datasource改变，一运行，还是崩了，和马丘弄了好久，我知道问题具体出在哪里，但是就是不知道怎么改，因为表面上看就是对的啊，还是等约塞回来吧。</li>
</ol>
<p>4，今天还是有几个要吐槽的地方，就是Xcode在调试的时候，明明数组什么的是有值的，但是调试显示的时候就是显示nil，醉了，一开始在调试接口的时候检查了好久，就是没有问题啊，但就是空，后来和之前调用过该接口的方法一对比，发现就是这样的，有值，但是不会界面化的显示出来，要你手动的PO出来，如果你要看值的话，折腾了好久，真是的！<br>明天的工作就是修这几个bug了，还有就是优化代码了，师父说要让他眼前一亮了感觉，我好有压力，我还是穿的亮色一点的吧！</p>
<p>明天周六！后天周日，又可以休息了，感觉比读书轻松一点，哈哈。</p>
<h3 id="2015年3月14日-周六-日报"><a href="#2015年3月14日-周六-日报" class="headerlink" title="2015年3月14日 周六 日报"></a>2015年3月14日 周六 日报</h3><p>今天终于把所有的首页的效果完成了，包括之前提到的问题，除了section的头高度，我有心情再改吧，我把之前用UICollectionview做的cell改成了用UIScrollerView控件，里面的小cell都一个个的计算位置，填充上去，这样是能很好的解决排序和中间横线的问题了啊，就是转换了一下思路，我之前没有考虑用UIScrollerView，是懒的计算啦，记得UICollectionview能很好的布局嘛，就不想麻烦了，没想到最后还是用了手动计算的布局，中间花了一点时间算，但好在是OK了，果然不能偷懒啊，现在就是天气那个有点问题，因为一直出不来数据，可能接口又有问题了，还是让约塞回来的时候看吧，主要是不能看效果。</p>
<p>明天的任务是重构代码了，优化一下，今天发现了一个UICollectionview的复用问题，按照约塞之前解决复用的方法，解决了我的问题，最让我郁闷的是头晕了还是怎么样的，就是把set喝get方法的赋值方式搞错了，再调试的时候发现了这个大乌龙，可能也是有点晕了，我一旦专注于另一种功能代码的编写，之前的一些小但是重要的知识点，我可能就是会想不到，包括之前在UITableView中用到的，根据自动布局，能自动的计算出cell的高度，就不用手算了，直接将size返回就好了，现在在用UICollectionview布局，虽然和UITableView的差不多，但是我一开始是在模仿之前的范例代码写的，完全没有想过说可以参考一下UITableView的计算cell的方法，我就是和之前代码一样，手工设置高度，这样因为有图片，都要根据宽度再动态的设置高度，一种情况下是问题的，当我在做优惠推荐的时候比较明显，因为每个cell不是一行填满的，是将cell分成了多列，如果每行的高度不一样，因为有边框设计，高度不一会难堪，但是高度一致的话，因为title的行数不同，可能出现行高不够，有文字隐藏的问题，怎么调也调不好看，如果一开始就把title的高设定的高一点，那间距就大乐，也有点不好看，感觉都是设计层面上的了，或者有更好的自动布局方式。</p>
<p>周一就是修补工作和参考资料的学习和练习了，一周又过去了，哈哈，还要耐的住寂寞，好好的写论文，咬文嚼字的。不管怎么说，总算是把整体弄好了，松了一口气了，现在回头想想感觉走了好多的冤枉路啊，好像也不是很复杂的布局呢，就是被我自己给弄复杂了，感觉积攒了好多问题啊，坐等师父回公司啊。</p>
<h3 id="2015年3月16日-周一-日报"><a href="#2015年3月16日-周一-日报" class="headerlink" title="2015年3月16日 周一 日报"></a>2015年3月16日 周一 日报</h3><p>今天进度超慢的，看了好久的weather资料，布局什么的不难，主要是ReactiveCocoa这个库看的好累，方便是很方便，但总觉得看下来不得要领，资料上说是能监控通知、action、KVO甚至控件的变化，但我还是有点理不清和通知机制的区别，现在只能是从范围上和功能上区分了，我感觉半天多的时间看下来，我顶多就是看懂了，下次师父的代码里面出现使用ReactiveCocoa，我是能看懂的，就是自己写是有点困难的，而且感觉灵活很多，总有一种朦朦胧胧，但是会一点就通的感觉。</p>
<p>我本来主要是要看weather的布局的，有很多的技巧能发现呢：</p>
<ol>
<li><p>LBBlurredImage:用来模糊化背景，我本来以为是直接将背景图片模糊，原来是有两层，一层是背景图片，二层才是模糊层，二层也是UIImageView控件，我将他理解成透明的磨砂层，能映出背景，再调整高斯半径就好了，表在滑动的过程中，二层image的alpha透明度在根据华东的高度改变，alpha越小，蒙板就越透明，背景越清楚。一开始觉得，好厉害，效果做的好好看。</p>
</li>
<li><p>UIFont：不怕笑话，字体类型也是今天才应用到，之前都是用默认的字体，之前看网上的UI设计图的时候还想呢，字体效果做的好好，就是没有去深究，最多就是加不加粗的问题，原来字体效果上设置也很有讲究呢，把它应用到首页改版的天气布局上，瞬间符合设计要求了呢，布局也做好了。</p>
</li>
<li><p>小的知识点：viewDidLoad与 init的使用背景，一句话一定要记下来“viewDidLoad可以在一个视图控制器的生命周期中多次调用。 NSDateFormatter对象的初始化是昂贵的，而将它们放置在你的-init，会确保被你的视图控制器初始化一次。”我感觉自己不是很注意程序效率的问题，要补一下视图控制器的初始化方面的知识。<br>4.封装：范例代码封装的真好，条理都很清楚，果然要多看好的代码，多学习模仿。</p>
</li>
<li><p>问题：iOS 8定位要先取得权限的问题，我在plist文件中添加了那两个配置项，但是对话框就是不出来，locationManager也是私有strong的啊，但是不行，一定要在appDelegate中再创建一个locationManager，并调用一下，相当于初始一下模拟器的定位权限，再把新建的manager删除，weather才能正确的用定位功能，我也是醉了。<br>今天看的ReactiveCocoa身心疲惫啊，还没有理解透。淡淡的忧伤。</p>
</li>
</ol>
<h3 id="2015年3月16日-周一-日报-1"><a href="#2015年3月16日-周一-日报-1" class="headerlink" title="2015年3月16日 周一 日报"></a>2015年3月16日 周一 日报</h3><p>今天进度超慢的，看了好久的weather资料，布局什么的不难，主要是ReactiveCocoa这个库看的好累，方便是很方便，但总觉得看下来不得要领，资料上说是能监控通知、action、KVO甚至控件的变化，但我还是有点理不清和通知机制的区别，现在只能是从范围上和功能上区分了，我感觉半天多的时间看下来，我顶多就是看懂了，下次师父的代码里面出现使用ReactiveCocoa，我是能看懂的，就是自己写是有点困难的，而且感觉灵活很多，总有一种朦朦胧胧，但是会一点就通的感觉。</p>
<p>我本来主要是要看weather的布局的，有很多的技巧能发现呢：</p>
<ol>
<li><p>LBBlurredImage:用来模糊化背景，我本来以为是直接将背景图片模糊，原来是有两层，一层是背景图片，二层才是模糊层，二层也是UIImageView控件，我将他理解成透明的磨砂层，能映出背景，再调整高斯半径就好了，表在滑动的过程中，二层image的alpha透明度在根据华东的高度改变，alpha越小，蒙板就越透明，背景越清楚。一开始觉得，好厉害，效果做的好好看。</p>
</li>
<li><p>UIFont：不怕笑话，字体类型也是今天才应用到，之前都是用默认的字体，之前看网上的UI设计图的时候还想呢，字体效果做的好好，就是没有去深究，最多就是加不加粗的问题，原来字体效果上设置也很有讲究呢，把它应用到首页改版的天气布局上，瞬间符合设计要求了呢，布局也做好了。</p>
</li>
<li><p>小的知识点：viewDidLoad与 init的使用背景，一句话一定要记下来“viewDidLoad可以在一个视图控制器的生命周期中多次调用。 NSDateFormatter对象的初始化是昂贵的，而将它们放置在你的-init，会确保被你的视图控制器初始化一次。”我感觉自己不是很注意程序效率的问题，要补一下视图控制器的初始化方面的知识。</p>
</li>
</ol>
<p>4.封装：范例代码封装的真好，条理都很清楚，果然要多看好的代码，多学习模仿。</p>
<ol>
<li>问题：iOS 8定位要先取得权限的问题，我在plist文件中添加了那两个配置项，但是对话框就是不出来，locationManager也是私有strong的啊，但是不行，一定要在appDelegate中再创建一个locationManager，并调用一下，相当于初始一下模拟器的定位权限，再把新建的manager删除，weather才能正确的用定位功能，我也是醉了。</li>
</ol>
<p>今天看的ReactiveCocoa身心疲惫啊，还没有理解透。淡淡的忧伤。</p>
<h3 id="2015年3月19日-周四-日报"><a href="#2015年3月19日-周四-日报" class="headerlink" title="2015年3月19日 周四 日报"></a>2015年3月19日 周四 日报</h3><p>其实今天狂了两天没有写日报了，为什么呢？我可没有偷懒哦，在完成自己工作目标的情况下，征求了师父的同意，我花了一点时间写我的论文，师父实在是太宽容了，确实如果不写好，会总想着，会影响工作的！我果断的抓紧时间写，终于完成了初稿，检测了一下，重复率25.96%，一次通过，绝对原创啊，非常感谢约塞的支持！今天刚好师父回来了，时间刚刚好，跟着师父又做了一个设计稿功能，很简单，最后的任务就是看 和网页js交互的资料，因为对js还不是很了解啦，语言都是相通的，看是能看懂大致的意思的，所以我主要看了iOS端的代码，回过去看了三次，今天不知道怎么了，感觉特困，可能是弄指甲太无聊，瞌睡虫出来了，第一次没怎么记到脑子里，英文语句就像催眠曲一样，第二次果断下载demo，逐字逐句的理解，程序运行起来，注释上自己的理解，好吧，流程大概是知道了，每个代码的准确意思我果断查中文资料啊，我感觉脑子里就是一团连着针的线，只要把针找出来，拎起来就能大致的用自己的理解理清楚webView与js传递消息的原理了，我提出了几个问题：</p>
<p>1.send:用send向js端发送消息是默认的消息响应处理<br>2.callHandle:js端和iOS端是一样的，能注册处理器，对不同的消息进行不同的响应处理</p>
<ol>
<li>registerHandler: iOS端也可以注册处理器，独立的处理来自js端的消息，所以说两端的对等的<br>4.webviewjs交互与scheme的区别：理解了webView与js的大致工作原理后，我就对.webviewjs交互与scheme的使用区别有了疑惑，之前都是用scheme的，突然出现了新的交互方式，有点不清楚什么时候用webviewjs，什么时候用scheme，还好在我“不善言辞”的提问下，约塞还是懂了我的意思，在我的理解下给出了“我的理解”对不对的判断，再纠正我的想法。我比较喜欢这样，一定要自己思考，不能单项的知识传递。总结一下，比较浅显的想法就是：scheme是需要动作来出发的，但是webviewjs就像是一种消息的通知，webviewjs是一种新的`和网页交互方式，我感觉基本上是可以用webviewjs代替scheme的，但是要看情况，哪个方便用那个方法。</li>
</ol>
<p>今天圆满结束，论文就差摘要的英文翻译了，回家fighting！</p>
<p><img src="/assets/mou.png" alt="setting"></p>
<h3 id="2015年3月24日-周二-日报"><a href="#2015年3月24日-周二-日报" class="headerlink" title="2015年3月24日 周二 日报"></a>2015年3月24日 周二 日报</h3><p>时隔三天来上班了啊，最近被答辩弄的心慌慌啊，下周二要第一批的答辩，老天爷保佑我通过吧！<br>今天做的都是修补的工作，和Vivian走了一遍与群组相关的设计体验，修修改改下来，我从用户角度来说，感觉真好，体验很舒服，之前在开发的时候没有怎么在意用户体验这一块，按照效果图做出来就好了，没有去处理过体验上的一些小细节。</p>
<p>这几次做开发都用到了之前我最初写的布局标签的View，我应该把他做的通用一点的，不能只局限于只适用一次，要复用，所以今天在改新的设计的时候，我稍稍修改了一下标签View，尽量能的复用代码，效果还是满意的，之前在学习属性的时候感觉像readonly不太用得上，但就像那个上课的老师说的，有经验的程序员就会合理的使用readonly、readwrite等属性，因为用到自动布局，之前在写标签view的时候还吃了亏，借助viewHeight的全局变量，来手动的返回cell的高度，因为viewHeight外部要调用，为了安全，我还是考虑使用了readonly，感觉这样比较好，自己之后在复用该标签view的时候也不会失误修改了viewHeight。</p>
<p>在修改群成员头像布局的时候，学习了新的collection view方法insetForSectionAtIndex，之前留白还没有考虑到，都是用scrollerview手动布局上去的，没有用到collection view，但有发现这个问题，现在也是觉得之前的思路也是笨笨的。</p>
<p>对于collectionView的布局，原来之前我都是半桶水，一直没有搞清楚他的布局规则，我也是醉了，还在纠结他是按水平方向还是垂直方向布局的，今天约塞一说，感觉脑子有点痛通了，因为我花了一点时间在考虑如何实现一行的布局还是两行的布局，我理解的是collectionView就是在主动布局，通过item间的间距来决定是不是要多行，就像我之前在布局标签的算法一样的，我要做的就是给定头像左右的留白和item间距。怎么说呢，一口吃不成胖子，只能慢慢嚼了！</p>
<p>最后出现了一个让我晕死的问题，之前在做首页改版的时候出现的section的header的bug，我说呢，因为我是反着做的，先给size赋了值，再根据count值来决定要不要将size改成zero，这下好了，两个小脑思考的不一样，都没有交叉，因为其中的section没有头，我没有将他的case考虑进去，因为size的初始值问题，他还是被赋值了，事实是没有的，这样就崩了，但是约塞的出发点是size是zero，根据count个给 size赋值，这个就没有问题了，被我忘记考虑的section的header的size还是zero不会出现问题。。。时间有点久了，我也忘了我是怎么思考问题的了！只能说打我吧，细节决定成败！</p>
<p>今天超级累的，要好好的休息一下，明明是周二，出现了周一的综合症。</p>
<h3 id="2015年3月25日-周三-日报"><a href="#2015年3月25日-周三-日报" class="headerlink" title="2015年3月25日 周三 日报"></a>2015年3月25日 周三 日报</h3><p>今天心血来潮，把家里也大扫除了，好好的整了整衣柜，不然总觉得衣服不够，日报只能姗姗来迟了。</p>
<p>今天上午做了一个小功能，在列表中加了一个广告位，但是耗了一点时间，要看之前的布局代码，这里有几点我要学习，要不说求攻略的体验好呢，在视图的图片滚动中，将滚动视图封装了起来，因为还有一些小的按钮工具什么的，这里有三个效果我觉得好棒的，之前都没有注意到，就是当滑动页滑到最后的时候有文字“继续滑动查看更多”（差不多，记不清了），感觉体验很好，之前都没有这样的设计，继续滑动就是连续的大图浏览，当滑动窗口在滑动的时候，添加在上面的小工具还有消失－显示的效果，觉得好好玩，而且在我滑动整个表的时候，滑动窗口的会有被拉大缩小的效果，我之前的Github上看过相似的效果，以为和pop效果一样用了第三方呢，原来是约塞自己写的，就是在监测表的scrollerView的滑动状态在动态的添加一个大图，改变窗口图片的大小，最后移除的过程，好厉害！代码没有仔细看，急着完成任务了呢，明天有时间就仔细的看一下，上午还不在状态，下午就有敲代码的感觉了。关于广告位的添加喔就偷了一个懒，那个计算section的逻辑看的我好晕，折腾了一下，怕破坏原来的逻辑效果，我就在最后section的cell上添加了一个UIImageVIew，反正那个cell也只有一个图片内容，我就根据广告开关来控制他们的frame就好了，不知道会不会影响最后的实现，但是测试来看应该是可以的。</p>
<p>下午师父在改我之前的首页代码，提出了一些我代码上要注意的地方和“致命”的问题，在优惠那块特别是在6+设备上有明显的停顿感觉,一检查发现还是cell复用的问题，所以相当于每次cell里面的内容都在重新绘制添加，表面上看不到，实际上已经有好几层了，view又是从loadNib里面创建的，再快的速度还是能看到有卡机的效果，但这里还是有frame的问题啦，不能在判断Tag里面赋值view的frame，一定要在外部重新的赋值，不然就是有宽度的问题，布局会有问题，这个有待解决，但理论上是对的。</p>
<p>在找出之前的问题纪录的时候，我发现之前困扰我的一个问题，就是collectionview能否像TableView一样用系统自动的计算cell的尺寸返回，因为在计算size的方法中不能有indexpath，TableView有相应的方法，临时创建cell为了得到size是没有问题的，但是collectionview没有这个方法，师父的解决方法就是创建一个property，用loadNib的方式初始化cell，这个cell的作用只是得到size，而且不涉及indexpath，这样就能实现和TableView一样的效果了。后来我一细想，因为TableView的cell的宽是一定的，就是view的宽，但是collectionview不一样，他一行可能有好几个cell，这样不能和TableView计算size的方式一样，赋值就能得到size，我之前没有用这种方式得到cell的高度就是因为这个问题，还是用了古老的方式手动的设置cell的等比例高度，原来处理collectionview的方法就是先初始一下cell的frame，让cell在自动布局的时候有参考，真正在布局的时候会根据约束改变size，然后用System….什么的获得重新布局完后的size，完毕！</p>
<p>我在处理图片的时候，被师父锐利的观察力发现了一个bug，就是图片压缩，之前都没有设置图片的contentMode显示方式，图片会被压缩，不好看，要使用UIViewContentModeScaleAspectFill值，他的效果是等比例的缩放图片，会填充完UIImageView,不留空白，多出的剪裁掉，这样那个“碗”的图片就正确放置了，还好发现了，不然就酿成大错了！还好还好。毕设中刚好改改这个大问题！</p>
<h3 id="2015年3月26日-周四-日报"><a href="#2015年3月26日-周四-日报" class="headerlink" title="2015年3月26日 周四 日报"></a>2015年3月26日 周四 日报</h3><p>应师父的要求，（尽量）每天写一篇日报，汇报自己的感想，随着“阅读”人数的增加，总有种小学生写日记，老师批改的感觉，总有点不好意思，文笔不好，只会打流水账，但随着数量的增多，每天的积累，写日报很有必要，有时候会忘记之前用到的知识点，但是“有日报纪录，走遍天下都不怕”，翻翻之前的要点，因为都是自己的总结，很快就能找到重点，我经常会犯一样的错误，要不断的敲打自己才会长记性。师父明见。</p>
<p>今天主要做了三个工作：广告栏、webView的导航条隐藏、objc与js交互的练习。之前只是实现了广告栏的现实效果，没有进行数据交互，今天完整了做好了分配给我的广告任务，幸亏我活学活用，对图片注意了contentMode属性，就是当下发现了昨天没有发现的一个小知识点，图片没有分割多处的部分，占了别人的位子，好吧，师父检查后发现还是需要clipsToBounds这个属性的，昨天处理的时候可能clipsBounds是默认yes，所以没有发现这个问题，今天clipsBounds属性可能在哪里被修改为no了，还好还好，多检查了一下。在获取广告数据的时候，不是当下用当下获取的方式，而是在App启动的时候就想服务端获取了所有的广告数据，放在用户设置中，用的时候在本地拿，算是让我转换了一下思路，我之前都是使用上面的反复工作的方法。</p>
<p>因为设计的需求更改了一下webView的导航栏显示效果，用的是之前学习的objc与js交互的知识点，本来心里还有点不踏实呢，做下来也还好，没有太大的难题，麻烦马丘临时加了js给我测试了一下，能得到消息，就是有个bug被约塞发现了啊，没有将获取到的数据转换成bool值，我一不留神就忘了，因为测试数据都是1，就没有发现，因为字符串有值的话，都是非0的，哈哈，闹了大乌龙，还有就是在显示导航栏hide的时候，发现scrollerview的frame总是不对，在有滑动操作后，一看，应该是那个随着滑动操作导航栏会跟着显示隐藏的效果导致的，我没有细看那个实现的算法，有点偷懒，但是直觉告诉我问题就出现在那几段代码，我尝试的改动了一下，在滑动开始的代理方法中根据js传过来的是否隐藏导航栏来改变frame和scrollerview的contentInset，最终的成稿还要在顶部加上一个返回键，这里我用的是pop方法返回的，在首页测试的时候返回是没有问题的，还好我多测试了其他的页面，发现当是model方式展示的用之前的back方法会有一个小 bug，还好，还好，在师父的指导下，用isModel的标记在区别是push还是model方式，再选择是dismiss还是pop的方式返回。完毕！</p>
<p>下班时间应我的需求，师父组织了一个关于apache、tomcat服务器的小课，讲的超好，理论与实践相结合啊，因为我是属于问题比较多的人，因为人比较少啊，提问也不会觉得难为情，问了好多幼稚的问题，还好老师们都能理解我的问题啊，感谢。我感觉之后可以不定时的组织这种小课，多学习、多扩展。<br>完美的一天啊！</p>
<h3 id="2015年3月27日-周五-日报"><a href="#2015年3月27日-周五-日报" class="headerlink" title="2015年3月27日 周五 日报"></a>2015年3月27日 周五 日报</h3><p>上午的任务是umeng埋点，不是很难，就那么一两个重点，在理清自己的思路的时候又对我之前做的首页改版代码过了一下，发现了一个foot的小bug，我感觉我对代码错误的命感度还是很好的，可能是错的太多了，成习惯了都。</p>
<p>下午的任务是学习了“一登”的人脸登陆功能，期间被师父发现了在toolcell中的一个bug，唉，怪我不仔细啊，好有负罪感的说，连忙去检查代码，就是布局算法上的问题，顺便优化了一下代码，解决cell复用的问题，这里在检查复用情况的时候发现layoutSubview方法不会再次进入，添加tag检查复用好像都没有意义了，其实是不对的，不知道是哪里出了问题，只有添加了setneeddisplay才能调用layoutSubview方法，但是在之前一个相似的例子中不需要这个方法调用也是可以进入layoutSubview方法重新布局的。</p>
<p>仔细学习了一下“一登”demo的代码，写的很干净啊，封装的也很方便，感觉用人脸识别特别的洋气。</p>
<p>就在刚刚写日报，检查复用问题的时候发现了一个bug，明天来要和约塞说一下，tool的对象从文件中获取有问题，奇偶次点击目的地进入分攻略的首页，tool的数量在会多一个或少一个，免得明天忘了，感觉自己是个专业找bug的了。</p>
<h3 id="2015年3月28日-周六-日报"><a href="#2015年3月28日-周六-日报" class="headerlink" title="2015年3月28日 周六 日报"></a>2015年3月28日 周六 日报</h3><p>今天是改bug的一天，收获颇多啊，怎么说呢，感觉我的万能调试总是能发现很多潜在bug，我感觉是我写代码不够严谨，给师父在修改代码的时候造成了一些重复工作的负担，稍稍有点负罪感的说，今天上午在开始工作的时候一直对自己在collectionView的复用不是很放心，感觉有很多的潜在问题，我还是想用约塞的方法进行对cell复用、内容展示的方法，我将layoutSubView中计算布局的算法使用ReactiveCocoa来监听对象数组的改变，来不断的绘制cell，这里要注意的是对subViews的隐藏和显示，因为要考虑到第二次加载的数据比第一次加载的数目小的情况，没有隐藏的话，复用的时候第一次多处的object还是会显示出来，是个明显的bug，在测试清迈的拜县的时候能测试出来，这里要注意的时候object创建的时候要检查父类是否存在该对象，不存在才添加，但是在内容的赋值的时候是要每次都执行的，我之前在处理的时候有忽视这个问题，冥冥之中让我记得去检查，上午把这个bug修改过来了，我讲工具cell和特惠推荐cell都重新封装过来，确保逻辑上没有出现什么大问题。</p>
<p>在做工具cell的时候要实现一个首次下载轮播工具page的动画，我一开始还理解错了，以为每次打开都展示一下呢，因为我“手贱”，我习惯的主攻略、分攻略都会去测试一下，动画在主攻略中perfect，在分攻略中因为启动动画的原因，提前展示了，用户是来不及看到效果的，我自己想了一个逻辑，我用了两个定时器在工作，其中一个定时器在控制另一个定时器的启动时间，我感觉我可能太“谨慎”对待NSTimer了，约塞改进了我的逻辑，只使用了一个，判断是否主、分攻略后，在加入开始轮播的方法中使当前定时器失效，清空，并重新新建定时器，开启开始轮播的定时方法，perfect！</p>
<p>在调试的时候最不喜欢的就是模拟器缓存的问题了，会给我带来错误的认识，以为是错的，一直的调试，其实是正确OK的，要记得无计可施的时候clear一下哦！</p>
<p>在处理poi页的分割线的bug的时候，学习到了2个知识点，要益处UITabelViewCell自带的分割线的时候可以使用缩进的方法，左边和右边各移一半，分割线就消失了，这里有个小问题就是cell自己的变量titleLabel是跟随cell分割线缩进布局的，这也是“一不小心”发现的，解决该问题的方式只能是自己新建label，代替titleLabel了。</p>
<p>在处理渐变、透明效果的时候，一般渐变的效果是从文字开始到结束的，我之前是整个UIImageView,难怪总是觉得不好看，颜色调度也是总是弄不好。</p>
<p>我感觉每次程序测试是我最喜欢的环节，不仅查漏补缺，而且一般能学到更多，最后将bug尽量的测试完全了，自己也比较放心呢。</p>
<h3 id="2015年4月2日-周四-日报"><a href="#2015年4月2日-周四-日报" class="headerlink" title="2015年4月2日 周四 日报"></a>2015年4月2日 周四 日报</h3><p>呀！今天时隔两天写日报了，绝对不是故意没有写的啊，真心是忘了呢，之前因为答辩的事情，弄的心情有点不好，坐车又好累，回家就忘了写了，幸运的是答辩通过了，不是很高的分数，只有88，但是满足了，说实在的不是很擅长严肃的场合说话呢，还是喜欢热闹的，大家都参与进去的感觉，超级感谢约塞对我毕设的指导啊，还有全技术部在晚上给我补课，现在终于可以安心的工作了，剩下的两个月差不多只要改改论文就好了，perfect！今天在review的时候听红茶对我的日报还是有期待的，能更好、更快的了解我，我之后一定不会忘了啊，罪过啊，文笔欠佳，就当小学生看吧，</p>
<p>今天又是改代码的一天啊，我其实挺喜欢改bug的，修改好后有一种全世界圆满了的感觉，最喜欢的环节就是给Vivian审核了，感觉这样比较有代入感啊，没有Vivian和师父之前的默契，我只能慢慢的调整习惯了，不能加重Vivian的工作量啊，不过最沮丧的还是再一次测试后，还能发现和之前不一样的问题，又是一个轮回，会有一点小疲惫，感觉自己好像没有办法一次性就可以调好，明明自己就有测试的说，我还是比较谨慎的人，难怪公司不需要测试啊，一个Vivian足以！双剑合壁，天下无敌！</p>
<p>之前在处理视图model方式的时候还是有盲区的，一直都避免用它，总觉得自己处理不好他，今天多个地方有用到，就是新建一个navigation的问题，我的理解是该nav是起到一个对后续操作能进行push的一个作用。今天在修正bug的时候还用到了UITextView的富文本，这个我之前也很少有，一般不用，用别的方法代替，但用一次看看也挺简单的，但我了解我自己，对我来说的新知识点，我第一次练习是了解怎么用，在参考资料的范例代码下，第二次遇到这种情况，我知道我应该用什么技术知识点去处理，但是可能方法名和使用规则会有点模糊，需要回顾，第三次就能“纯”手打了，今天在使用MBProgressHUD的时候感觉比较深，其实就三个步骤：show.. labelText….hide….，但就是不自信的，一定要回过去好好的看看操作顺序，怕逻辑上有问题，有的时候是当下测不出来，用户就测出来了，准备工作要做好，我在show提示文案之后旨在通讯成功的block中hide了HUD，好家伙，我就是忘了在失败的时候隐藏！还好在Pull代码的时候，冲突，约塞眼力好，看到了，真是冥冥中天注定啊，没有出现那个愚蠢的错误，要是我使用类似有该bug的app，心情好的时候就退出，心情不好可能会吐槽呢。在上线前一定会好好的检查一下的，多拿几个人测试看看用户体验，会不会出现一些“反程序员操作逻辑”的错误啊。</p>
<p>今天在review的时候问了好多问题啊，认识到很多自身存在的问题，我会一一的改正，最先的就从我的“作息”开始吧。因为正在健身，修复身体的病垢，觉得好累啊，果然要锻炼了，23岁的心，40岁的身体，坐办公室办公的尤其注意，明明之前不太容易胖，上班就容易胖，所以三点后的健美操一定要认真做啊！感觉很有价值，工作，健康两不误。</p>
<p>最后吐槽一下，“爱拼车”iOS的app感觉不好用，一直提示网络不好什么的，被坑了。。。。反映一下，望修正。</p>
<p>过了明天就清明节放假了，明天工作是不是感觉卯足了精神呢！晚安。</p>
<h3 id="2015年4月3日-周五-日报"><a href="#2015年4月3日-周五-日报" class="headerlink" title="2015年4月3日 周五 日报"></a>2015年4月3日 周五 日报</h3><p>今天又是调bug的一天，都是在挑小刺了，很仔细的将iOS首页的改版的部分好好的测试了一下，一个个的点过去…..在广告部分好好纠结了一下，我就有一点钻牛角尖，知道确切错误的地方并改正后，我一定要知道之前是哪里想错了，再沿着我的思路在走一次，过一过。今天我发现我都NSDictionary竟然还不甚了解！当头一棒啊，之前在修改广告栏crash的时候，使用了count的方法在控制广告banner的开关，我以为是因为NSArray的类型的问题，因为wiki文档中写的是“｛｝”，我想说那传过来的对象类型的，如果是空的话我赋值的也应该是nil，所以导致我没有做检测，但原来不是的，后台不管是数组类型的还是只有一个字典对象的value，就算是空也是不nil，就是0 object，所以我上午纠结了好一会儿的广告值通信的问题，仔细想想，想明白了也就“死心”了，这个过，调别的bug。</p>
<p>下午就是继续fight，以为能今天上线呢，唉。。。。。。果然我还有很多需要加油的地方，其中在做openURL操作的时候，我手贱啊，看到有一行的警告，因为上一行代码赋值的URL类型就是NSurl类型,我就很“自觉”的将［NSUrl Url….］给删除了，就把URL传给openweb方法了，我说怎么都面在测试的时候就是一直crash呢，约赛一看，好吧，我忘了看上一行赋值URL的对象是字典啊，取出来的就是字符串类型的，NSUrl *只是一个“符号”是用来告知编译器的，真正的id还是NSString，我记得这个知识点在学习iOS基础的时候我还是有理解的，果然还是实践中出真理啊，不复习就忘了。</p>
<p>今天改了一个“超级无语”的bug，就是推荐优惠的部分，一开始图片还在缓冲的时候图片和文字会重叠，约赛只是说：“好，那我看一看”，一下就解决了，解决方案就是默认图片啊，因为在自动布局的时候，默认图片比实际的大，先会以默认图片的大小为基准布局，在缓冲图片，难怪缓冲完推荐优惠就没有重叠的bug了，我也只能跪了，一次性就把所有的默认图片都取消了，换成了灰色的背景，完美的解决了呢，最重要的是修改默认图片换成图片默认背景的问题之前就提出来了，我就是忘了换了，只专注于trello上的bug了，口头上的就会忘，果然好记性不如烂笔头啊，验证了真理，如果早点修复，就不会浪费那么多时间纠结了，但是如果是这样也许就不会理解默认图片带来的自动布局问题会带来这样的影响。呀，我完全是bug生成器嘛，师父就专门负责对付疑难杂症了@约赛。</p>
<p>最后就是感觉和UI设计师的交流是多么的重要啊，在开发前要尽量流程走一遍，我现在就是在群主关注和移除的地方卡住了，逻辑要换一换，我在设计前的思考和设计师做的体验效果是两个方向啊。。。。我也是醉了，最后居然演变成了和Vivian“精神交流”后，才发现了这个流程问题，好吧。<br>需要成长的地方还很多，来公司第一个app上线更新的部分，还是想尽力的好好做，多跟踪测试，24小时待机中！</p>
<p>有的时候难免会有精神疲惫的时候，这个节日来的正是时候，要调整一下心态，重新出发。<br>最后就祝“XX节快乐！”吧。</p>
<h3 id="4月7日"><a href="#4月7日" class="headerlink" title="4月7日"></a>4月7日</h3><p> 今天熟悉了怎么发布app，不复杂，只要注意细节就好了，师父都有一步步的教，不清楚的立刻再去问，发布很重要啊，就是等的时间有点长，10分的时间发布求攻略，感觉4分都在等更新和上传缓冲，唉，但是这样有个好处啊，能反复多次的，步骤就熟记于心了，哈哈。今天操作下来我大概submit了10个攻略，在过程中熟练操作了分攻略的下载zip、下载图片、优化图片操作，用着用着就熟练了，其中比较“旧”的分攻略会有小的改动，需要修改一下pod的路径，build的时候会报错。最后的提交审核还是师父把关的，这样我也比较放心，今天任务比较简单，但是比较繁琐的，真是考验耐心啊，公司一段时间被我们iOS发布应用占了大半的网速啊，想想也是。。。<br>  一天下来，对公司攻略的发布流程掌握是OK了。</p>
<h3 id="4月10号"><a href="#4月10号" class="headerlink" title="4月10号"></a>4月10号</h3><p>持续颇久的主、分攻略上线总结要告一段落了，第一次发布上线还是略有紧张的，因为之前忘了测试iOS7系统的，上线的出了bug，还好iOS7的用户群没有占多数，还来得及弥补，发现问题立刻更新了新的5.4.1版本，上线的过程一开始是新奇，因为“求攻略”庞大的产品数量，慢慢的就变成流水线工作了，剩下的注意细节就OK了，因为之前有些分攻略有段时间没有更新了，需要修改的地方比较多这里可以总结一下：</p>
<ol>
<li><p>首先就是分攻略的包下载，图片处理，练习了十几次了，命令比较少，操作的还是熟练的，但是这里要注意的是在下载文件的时候要注意QGLBoardID，我之前傻傻的一直以为是随意的。。。。在程序里要用到每个分攻略的QGLBoardID来获取包文件的。</p>
</li>
<li><p>有一些“年代久远”的分攻略需要修改pod的路径：完整的是</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&quot;$&#123;SRCROOT&#125;/Pods/Target Support Files/Pods/Pods-resources.sh&quot;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>该问题没有修复会产生70多个错误提示</p>
<ol>
<li>因为攻略中都使用到了自定义的字体，需要在plist文件中增加字段：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;key&gt;IBCustomFonts&lt;/key&gt;</span><br><span class="line">&lt;dict&gt;</span><br><span class="line">    &lt;key&gt;Helvetica Neue&lt;/key&gt;</span><br><span class="line">    &lt;string&gt;Lantinghei SC&lt;/string&gt;</span><br><span class="line">&lt;/dict&gt;</span><br><span class="line">&lt;key&gt;UIAppFonts&lt;/key&gt;</span><br><span class="line">    &lt;array&gt;</span><br><span class="line">    &lt;string&gt;Lantinghei_0.ttf&lt;/string&gt;</span><br><span class="line">&lt;/array&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>该问题没有修复程序会crash。</p>
<ol>
<li>同时要多添加URL字段，用于支付宝的支付：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;dict&gt;</span><br><span class="line">    &lt;key&gt;CFBundleTypeRole&lt;/key&gt;</span><br><span class="line">    &lt;string&gt;Editor&lt;/string&gt;</span><br><span class="line">    &lt;key&gt;CFBundleURLName&lt;/key&gt;</span><br><span class="line">    &lt;string&gt;Alipay&lt;/string&gt;</span><br><span class="line">    &lt;key&gt;CFBundleURLSchemes&lt;/key&gt;</span><br><span class="line">    &lt;array&gt;</span><br><span class="line">        &lt;string&gt;alipay.$&#123;PRODUCT_NAME&#125;&lt;/string&gt;</span><br><span class="line">    &lt;/array&gt;</span><br><span class="line">&lt;/dict&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="4月11号"><a href="#4月11号" class="headerlink" title="4月11号"></a>4月11号</h3><p>昨天实现了群组管理的界面，今天就在这基础上完成逻辑上的交互，今天算折腾的久的，昨天搭个界面还是简单的，今天才算是真的又回到代码的世界啊，要知道之前花了2、3天在重复的发布工作中，脑子都有点锈了呢，还好年轻还能缓过来，哈哈。<br>现在是在慢慢的上手，通过新的工作内容，一步一步的熟悉iOS的代码，在搭建界面的时候我发现了一个控件UIAlertController，说来可惜，之前没有使用过该控件，都用的UIAlertView，网上一查“苹果官方现在并不提倡在iOS 8中使用UIAlertView,取而代之的是UIAlertController”，好吧，约塞的代码果然先进，要是我一定还是傻傻的用之前老的方法，都没有进步，不过也闹了一个笑话，在模仿约塞的代码写UIAlertController的时候，当时的控制器是有一个property的masterViewController的，我还以为是固定模式呢，一执行，不对啊没有效果，一看不对啊，masterViewController是nil，一问，因为之前在布局创建群组的时候是将其中三步创建的控制器的view add到总的建群的控制器中（一两句说不清），所以在逻辑结构上需要讲self赋给masterViewController，继续UIAlertController的present跳转，确实使用下来感觉比UIAlertView要好一些，⛽️。</p>
<h3 id="4月12日"><a href="#4月12日" class="headerlink" title="4月12日"></a>4月12日</h3><p>今天学到的最大的一点就是界面跳转，指针传递了，真是要好好夸夸师父，总是有惊喜啊，因为在iOS中push跳转用的是堆栈的方式，在编写群组消息修改的时候为了更好的实现功能，在我还在纠结些block、完成按钮的时候，约塞提到两点：1.不想要完成按钮，直接返回带回修改的内容 2.不用额外些传值方法，便捷的可以使用model的方式将对象传过来，因为指针的指向时不变的，当我们修改model对象内的字段的时候，只是修改了字段的指针，没有修改model的指针，model还是原来复制的那个原始对象，在修改界面见跳转的时候唯一变化的就是model包含的字段值了，没有更多的逻辑交互了，因为是堆栈，是没有对之前的控制器和对象进行销毁操作的，这这这，我心头一紧！还能这样啊，这是我之前从没有接触，想到过的方法！应该是不赶尝试的方法，但是经这么一点化，好方便的，一，控制器之间的逻辑交互没有那么紧密，不复杂就不容易出错，二，代码优化很多，效率提高不少。我真正想通还是下午又喝约塞上了一个小课后，因为一直没有往这个方向想，没有理解清楚，还在纠结说将stringA复制给stringB，stringB改变了会影响stringA的程度，现在想想也是脑子拎不清，在实现功能时候出现了4个比较大的问题总结一下：</p>
<ol>
<li><p>复用问题：思考的时候没有将复用考虑进去，再问已经将model传值了，model中有我想要的一切字段，应该就不需要上面的property字段了吧，他们的存在都是有价值的，model的存在是需要指针传递操作，旧的property字段是为了适用于之前使用该试图的功能部分，做到不影响。</p>
</li>
<li><p>什么时候“返回”值：在试图willDisappear的时候修改model中对应的字段值，这样不需要任何的“完成”按钮</p>
</li>
<li><p>datasource ＝ nil：datasource使用了property，在绘制cell的时候是从datasource中取值的，需要将datasource清空，重新讲修改后的model赋给datasource，该操作在willAppear中实现</p>
</li>
<li><p>tagView的subView移除：之前在封装标签页的时候没有考虑到有重复用的情况，所以没有做好清除的工作，想：反正就一次，这次就连着修改这个bug，除了将包含tagView的contantView的subviews移除外，要将tagView的subviews也移除，因为tagView使用的也是property的方法，如果不清楚，在添加新的tag的时候会出现不可预计的布局问题。这里纠结的时间比较长，只考虑到了contantView，没有考虑tagView，还是约塞心里有数，一看就知道了，总共也就花了几分钟，加测试。</p>
</li>
</ol>
<h3 id="4月13号"><a href="#4月13号" class="headerlink" title="4月13号"></a>4月13号</h3><p>昨天的工作是测试版本5.4.2,因为测试已经进行到后期了,一些疑难杂症,我真是无能为力,特别是那个自动布局返回会错乱的bug一直调不过来,我就复杂调试一些很简单的bug兼职ios7.0的测试,约赛任务比较重,在适当的机会我就看swift,我感觉我看书还是有点高中高考看书的感觉,我一定要逐词逐句的看过去,理解过去,包括代码,举一反三。</p>
<p>昨天在学习的时候遇到的最大的困难就是”可选类型”的知识点吸收了,我看了可选类型中得返利代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if convertedNumber != nil &#123;</span><br><span class="line">    println(&quot;\(possibleNumber) has an integer value of \(convertedNumber!)&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当下是理解的,说可选类型convertedNumber不等于nil的情况下执行下面的操作,但当隐试解析可选类型出现的时候,”!”有个解释是解包,获取可选类型的值,我一向贯彻“举一反三”的学习方法，一回想上面的代码，不对啊，“!”如果按上面的代码理解(我的理解:error),应该是从convertedNumber类型中获取值来判断是否是nil,不是应该是这样翻译吗:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(convertedNumber!) != nil</span><br></pre></td></tr></table></figure>
<p>我一直在这边打圈圈,感觉对”!”有误解,在约赛”坚持不懈”的讲解下,包括代码的演示,好吧,我发现我没有理解清楚文案中得一个知识点:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">一个方法要不返回一个对象要不返回nil</span><br></pre></td></tr></table></figure>
<p>所以上面比较的convertedNumber可选类型不等于nil,在比较的是可选类型整体,因为就两种情况:有值和nil,所以(convertedNumber!) != nil是绕了一下,好吧,完美解决,这是我在学习swift中遇到的其中一个知识点的遗漏,这样处理能很好的解决服务端传到客户端,客户端在处理意外数据的情况,这次版本的发布就出现了很多这样的问题.</p>
<p>坚持每天一章以上吧,可能的话,比较平静的生活需要激情的打压呀</p>
<h3 id="4月14日"><a href="#4月14日" class="headerlink" title="4月14日"></a>4月14日</h3><p>经过上次的上线后，发现iOS7有崩溃的现象，这次我在测试的时候会小心一些，用我们求攻略唯一的iOS7系统手机测试发布（在此，感谢达尔文的无私贡献）。这里有几个很奇怪的问题</p>
<ol>
<li>一个是在使用mantle进行转换的时候，在iOS7的系统下bool类型的字段会有影响，会crash</li>
<li>还有一个是在计算CollectionViewcell的高度的时候预设定的cell的高度用MAXFLOAT，在iOS7的情况下会crash,有两处有使用到MAXFLOAT，但是测试下来只有一处有这个问题</li>
</ol>
<p>上面的情况是真机测试的结果，当改成固定值的时候能修复这个bug，模拟器就不说了，环境不一样，出现的crash的地方还和真机的有出入，这样调试还调不完，我们iOS开发全组投票还是根据真机来测试拍错（哈哈），</p>
<p>下午，约塞给我了一个学习任务，就是使用automator做一个制作不同分辨率的icon工作流，我先上网搜索了一下教程，一般都是界面画的，直接拖拉就可以了，但是就按师父的说，这样做还是有局限性的，我就把这个做为使用原理的理解吧，这样浅显的方式，让我感觉还是比较好入门的，心中的门槛先放下，找到开发方向的资源的时候，应该能比较快、好的理解工作流的使用，几个小的工作流操作下来，感觉还真是挺方便的，苹果就是好啊。</p>
<p>我发现健身还是挺容易占用我的时间的，一般这样回家9点，差不多洗洗睡的时间，只能写写日报，看个一集的娱乐视频，浏览计划一半的学习资源，眼皮就困的不行了，看来还正是一周不能操作3、4次啊！向右上角一瞥就12点了！</p>
<p>早睡操起好难啊！</p>
<h3 id="4月16号"><a href="#4月16号" class="headerlink" title="4月16号"></a>4月16号</h3><p>今天一整天都在处理选择目的地的页面设计，昨天只做了简单的界面，大体是出来了，心里也比较有底气了，有的时候，一张白纸给你反而觉得心慌慌，但是一张满满的纸，改改什么的，就觉得充实一点，在大体界面的基础上，考虑逻辑实现，要喝Vivian多交流，问清楚设计需求。<br>我感觉我写代码还是有些保守的，很注重设计稿效果，今天在处理列表的时候，我一看目的地排列的那么整齐，就在思考怎么实现对齐的列表了，但其实这样是不太好的，每个地方的名称长度是没有办法控制的，因为按钮点击有有一个效果是是一个勾号，因为错误的布局思路，这个效果一直做的不好看，我有的时候就是死脑筋啊，再三确认设计需求后，决定按照名称的长度来布局按钮，其实这样也是很方便的，在记录选择目的地的时候，用到了之前指针传递的知识点，实在是太棒了！对师父膜拜啊，节约了好多代码，也提高了效率。<br>搜索的功能让我复习了一下之前的UISearchDisplayController，不用就会忘的，要反复的使用，学习的说。不过这个发现了一个bug，就是在iPad中UISearchDisplayController没有呈现和phone中的效果，这个问题就留给师父解决了（哈哈），约塞是我强大的后盾啊！<br>最终的效果，完美！</p>
<h3 id="4月17日"><a href="#4月17日" class="headerlink" title="4月17日"></a>4月17日</h3><p>又是阳光明媚的一天，今天得知了一个消息就是我们之前上线的app没有通过，因为有“更新”操作，显然苹果误解我们了！不过我不久之前在社区上有看到这个消息，我以为求攻略没有呢，因为现在iOS7系统都是能自动更新的，所以不需要更新操作了，可是那只是一个按钮啊，也被否决了，好吧，只有重新上线了，不过在这之前我们还能乘此机会修复了一个bug，就是toolbar的ios与js的交互隐藏显示，我记得之前在测试的时候是好好的，我有看到原先的toolbar显示效果，这样我才能测试隐藏啊，真是奇怪了，可能又是哪里不小心改了代码了，好吧，看来我以后不光iOS7要测一遍，新添的功能都要好好的测一遍，不要嫌麻烦。<br>幸好，我今天心血来潮，测了一下iPad的效果，发现一个大的bug，searchDispalyController在pad中不能正确的展示搜索效果，以极快的速度向师父反映了这个问题，原来是pad的tableview的显示效果是用popover来展现的，这种时候，师父通过搜索的神技，找到了神一般的解决方法，就是替换啊，就是不通过popover的方式，直接将searchResultTableView赋值给self.view,并且在适当的时候替换回来，好吧，完美的解决了问题，这里要注意“取消”按钮，也要做相似的操作。<br>  今天在解决toolbar的时候，给约塞挖的坑给绊倒了，在修改hiden参数的时候，问我date[@”hide”] = @YES，为什么不这么做，而是data = @{@”hide”:@YES},说真的，我可能第一反应要我选择我会选择第一种，不过我可能更直接，直接测试赋值，不通过data，哈哈，原因就是data是id类型的，网络端传过来的data不知道是不是mutable的，如果不是，不严谨，是会crash的，好吧，认输，我的经验还是不够啊，还有一些地方做不到很仔细，但是晚上饭局约塞说的对啊，iOS是很考验、注重细节的！<br>  今天是周五，这周双休，但是代码敲到一半好不爽啊，决定明天上午继续去写代码，把功能完善一下，反正闲着也是闲着，今天的swift每日一课也不能拉下！</p>
<h3 id="4月21日"><a href="#4月21日" class="headerlink" title="4月21日"></a>4月21日</h3><p>这几天一直在看swift的基础语法，我感觉和objc比变化挺大的，我看着看着，很多地方很像C、C++，结构体、类那边的知识点，我现在的计划的是在swift书中对基础语法过一遍，仔细看一次中文的一些要点解释，重点还是约赛建议的看ituns上的swift视频教程，我这两天看下来的感受就是一篇幅的文字真的很难看到脑子了啊，只有先看代码，按照自己的理解不是很懂，再回去看文字解释，这样反而效果好一点，还有就是感觉swift有好多的细节啊，同一个代码效果，可能因为“！”或者let常量、var变量的变化，写法可以变化好几种，有点晕了，我为了快速的过一遍，基本都是脑子记得，没有敲代码，到视频实战的时候在手敲，难免有这种不熟练的感觉，果然还是年轻，有点浮躁啊，是时候去锻炼一下身体了，过过躁气了。<br>我现在对我自己的学习目标就是先学习swift，间接配合cocos2d,要不是之前做的台湾的分享，我都想不起来了当初对iOS感兴趣的初衷是想要学习AR扩增实境技术，现在只有基础的objc知识，要在iOS上有新的突破点，一定要学会自己学习，我在这方面要加强，在平时我知道自己的自制力还是不够的，一定要人管着你，这样我就乖了，哈哈，还有好多事要做，还好，我还年轻。<br>就在今天快结束的时候，发现了冠以git学习的一个blog，实在太幸运了，是在逛技术社区的时候发现的：<a href="http://backlogtool.com/git-guide/cn/stepup/stepup1_4.html" target="_blank" rel="external">git 学习</a>，之前就很想仔细的看一下了，今天上午收获还是很多的，还有就是在我坚持不懈的情况下终于安装好了<a href="http://blog.csdn.net/qiurisuixiang/article/details/8798239" target="_blank" rel="external">cocos2d的环境</a>，很想尽快的试一下，哈哈，好激动.</p>
<h3 id="4月22日"><a href="#4月22日" class="headerlink" title="4月22日"></a>4月22日</h3><p>今天出了一点小插曲，之前一直在做的目的页选择我测试了效果好几次，百密一疏，在循环查找的时候只遍历的部分的列表，也不知道我当时怎么想的，感觉逻辑差不多，我就直接复制过来了，没有细想差别，难怪之前测试的时候有的时候会出现bug，有的时候没有，这就取决于当前的地点选择区域时那一块了，具体的说不清，就是复制黏贴的错！<br>还有我就是做了一件傻事，今天在发上线app评论邮件的时候，我一个个的去创建了链接，明明在mou下面有之前整理好的app链接，是用markdown语法写的，当时用Mou用工具我以为左边就是显示效果的，在邮件中用markdown的语法写链接，当然是不成功的，我也傻傻的就手工完成了之前29的工作，今天在师父的“手把手”指导下，原来直接可以黏贴Mou右侧的富文本，粘贴到邮件中，也会自带富文本格式，我真的是不想吐槽了都，上天啊，让我去吧！对不起全世界，对不起求攻略，对不起师父啊，再一次考验了我的智商！</p>
<p>上面都是之前预处理的事情，今天师父回来了，就有了一种找到组织的感觉，工作效率高了，哈哈，帮我找出了上面的代码的问题，还有在做trello中的TODO的时候我发现我之前在使用NSuserDefault的一个误区，就是是不能讲nil进行setObject的，和NSDictionary是一样的，如果需要清楚value，就使用remove方法，因为现在的需求是在根据网络传过来的数据在决定要不要在NSuserDefault中存储数据，我之前的做法是无论怎么样，不是用清除的方式，就是填充yes or no，因为当前key的value没有值，返回的是no，那我给NSuserDefault赋值no，取出来的也是no，一样的效果，就没有去深究，这是针对bool的情况，像是string类型就是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[config setObject:@&quot;&quot; forKey:kUidKey];</span><br></pre></td></tr></table></figure>
<p>突然发现可以用更规范的方式,不过这个要明天问一下约塞，应该是有我没有考虑到的问题存在；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">NSUserDefaults *config = [NSUserDefaults standardUserDefaults];</span><br><span class="line"></span><br><span class="line">[config setObject:@&quot;&quot; forKey:@&quot;key&quot;];</span><br><span class="line"></span><br><span class="line">NSString *nullValue = [config objectForKey:@&quot;key&quot;];</span><br><span class="line">NSString *nilvalue = [config objectForKey:@&quot;key2&quot;];</span><br></pre></td></tr></table></figure>
<p>还发生一件比较尴尬的事情，就是我和Vivian在交流的时候，我好容易就是用程序员的想法去理解设计的需求，也用程序员的思路去询问Vivian，感觉还不是很好的能和设计师交流，传达我的想法，就今天在关于埋点的时候，我后来理解了Vivian的消息数的意思，“总共有多少人点击”在Vivian看来就是友盟上显示的总是，从我这边埋点的代码编写上我要实现的是“纪录当前的点击”，一开始我没转过来，我一直在想总数我这边不能纪录啊，我只能纪录当前的，但Vivian就在给我解释需要的就是总数的，约塞稍稍给我点了一下，其实我是知道的，对话有点牛头不对马嘴的感觉，我感觉我还是太年轻，没有很多经验在转换角度上，我很容易就把和约塞讨论时候的思路带到Vivian的讨论上，还是需要多弄几次我就知道了，我感觉很多时候真的是要多敲敲我的榆木脑袋啊！</p>
<p>最后祝福语就是：“家”合万事兴！祝愿我们求攻略<strong>旅行社</strong>越走越远（xixi!）</p>
<h3 id="4月23日"><a href="#4月23日" class="headerlink" title="4月23日"></a>4月23日</h3><p>今天在做左右滑动效果的时候，自己尝试了几种方法，但是都不行，略微有点沮丧的，本来觉得说效果还是简单的，可以不用网上找demo，后来还是妥协了啊，就在这样的契机下，我发现了之前没有使用到的一个控制器UIPageviewcontroller，能实现分页的效果，翻书效果就可以用该控制器实现，使用UIPageviewcontroller的一些demo是可以用来实现bannner的，甚至UIPageviewcontroller还提供了两个代理方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">presentationCountForPageViewController</span><br><span class="line">presentationIndexForPageViewController</span><br></pre></td></tr></table></figure>
<p>能“顺便”帮助显示pageControl的分页滑动效果，实在是太方便了，之前看到的一些分栏显示的demo很多都是自己写的，我感觉系统给了这个控件更加的方便，看来还有好多的领域没有学习到呢，只有在实践中出真理了。</p>
<h3 id="4月24日"><a href="#4月24日" class="headerlink" title="4月24日"></a>4月24日</h3><p>昨天主要是“费劲脑汁”的实现了分栏滑动效果，今天主要是优化一下代码，昨天比较匆忙，完成后要实现的就是顶部的标签页的联动了，一开始开挺简单的，但是感觉就是要优化，做的好一点的体验，我花了不少的时间，因为ScrollerView的偏移量滑动动画总是不对，三十计算是没有问题的啊，换了好几种思路，下午约塞回来后，我实在是不想再纠结下去了，怕走到了胡同里，提出了我的问题，看到我还原效果后的标签滑动效果，师父直接说可以不用启用pageEnable,我当下的感觉就是：醍醐灌顶，就感觉之前偏移量的问题就是因为我设置了分页效果，ScrollerView额外帮我做了一些我不需要的效果，我当时用pageEnable的思路是，用户看完这一页，滑动久直接看下一页的内容，没有考虑不要分页效果的情况，我还是太固定思维了，经验太少，希望下次不要再犯这种低级的错误了，浪费了我好多的时间！想想都好难过的！<br>剩下的滑动体验就是处理一些细节了，算法可能就一行，但是我要像很多种方式，怎么做会比较好。<br>提交代码后，师父帮我过了一遍代码，指出我在处理create多个控件的时候要注意的是subviews的clear,我一开始思考布局的时候有想写clear superview的问题的，但是后来想到反正标签栏只创建一次，也可以不用去做这个clear的步骤了，代码也干净一点，但是这样有点不好，之前如果有刷新标签栏的需求的话，我可能是会忘记clear操作，好的代码习惯是很重要的，要考虑到扩展的情况，代码要优雅的同时，逻辑要严谨一些，避免一些“万一”的情况。</p>
<h3 id="4月27号"><a href="#4月27号" class="headerlink" title="4月27号"></a>4月27号</h3><p>今天做的是群资料的群动态，因为接口的问题，耗费了一点时间蒸腾，在我改好model后，一直在接口数据没有进行映射的问题上纠结，后来竟然发现是因为没有对requestObject转换，直接就用requestObject赋值了，当发现问题的时候真的是太羞愧了，很简单的问题，主要是以前一直在用字典类型，时间长了，我居然忘了要用model类型进行映射了！我说呢怎么一直crash。</p>
<p>下午就主要在处理旅行分享中群动态的标签和内容的布局了，内容的位置换一下就好了，而且之前约塞写的很清楚，布局很干净，就是一些仔细的计算一下逻辑，就是在处理标签View的时候我纠结了好久，是复用之前的QGLTagLayoutView呢，还是再写一个新的，因为颜色、宽度、字体大小都有变化，之前在写QGLTagLayoutView的时候是将字体大小，颜色和背景都是写死的，后来想讲这个弄的可复用性强一些，之后都能用到，我还是决心再封装一下QGLTagLayoutView，这时候我就发现了三个问题：init、awakeNib、和cell复用带来的问题。<br>因为之前已经用了QGLTagLayoutView写了几个页面了，再添加property的话可能会影响之前的功能，所以还是用参数默认值的方式，后来在处理基础类型的时候发现了一些系统初始化方法的细节：</p>
<ol>
<li>init方法：是在View创建的时候加载的 alloc init 方式</li>
<li>awakeNib：是在xib文件加载的时候加载的</li>
</ol>
<p>我出现的失误是cell在计算高度的时候确实是xib加载的，但是！但是！我里面的tagView是用alloc init的方式加载的，我没发现，不知道师父怎么知道的，走一遍流程就知道了！佩服，我遇到的问题还是太少了啊。没办法火眼金睛啊！所以当我的参数在awakeNib中初始化的时候，加载方式不对，死活进不到初始化参数的方法中，一直crash！下次一定注意。</p>
<h3 id="4月28号"><a href="#4月28号" class="headerlink" title="4月28号"></a>4月28号</h3><p>之前只用到了TTTAttributedLabel富文本的简单方法，在做评论效果时，需要实现点击评论用户名称跳转到用户信息页，TTTAttributedLabel的label没有添加动作的方法，但是有提供添加链接，其中有提供相应的回调方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-(void)attributedLabel:(TTTAttributedLabel *)label didSelectLinkWithURL:(NSURL *)url &#123;</span><br></pre></td></tr></table></figure></p>
<p>可以用来处理点击操作，根据链接提供的信息，这里QGLOpenURLHelper已经封装了跳转到用户信息视图的链接，URL格式是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">userprofile://id/&lt;user_id&gt;</span><br></pre></td></tr></table></figure></p>
<p>这样还是第一次使用到，之前在跳转的时候使用的接口返回的用户ID链接。<br>不过在操作该过程中出现了一个“幼稚”的bug，我自己调试的时候死活没有发现，都在观察报错原因了，当约赛在协助调试的时候，我发现label的text是“文本”，是初始值，没有将string传过来，NSRange超过了文本的字符长度，crash了，因为我把addLinkToURL操作放到了setText Block中，block结束前没有将mutableAttributedString返回，所以没有正确的在TTT富文本中创建链接动作。当然addLinkToURL后文本会有超链接样式，可以使用linkAttributes属性修改样式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">self.contentLabel.linkAttributes = [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:NO] forKey:(NSString *)kCTUnderlineStyleAttributeName];</span><br></pre></td></tr></table></figure>
<p>在修改旅行分享的群动态时，有观察到section时有边框的，想说能不能和cell一样,collectionView 和tableview也有提供方法能绘制section的样式，cell的样式可以在willDisplay….中修改，其实这边我有个大方向做了，cell是一个view，是能修改样式的，但是section不是view，是美誉办法做一劳永逸的操作的，只能一个个的在cell中手动的画上去，这里我将是否需要cell边框做成一个property参数，用RAC去监听，top、left、bottom、right都分开监听，使用的时候默认隐藏边框线，根据传参来决定是否需要显示lineView。这样是能显示出section边框效果的。</p>
<h3 id="4月29号"><a href="#4月29号" class="headerlink" title="4月29号"></a>4月29号</h3><p>今天的主要任务是群动态说明的展示，我本来做了一个很简单的动画，从上至下的展示和隐藏移除，后来想应用到之前的pop动画，因为群动态图片弹出的时候有涉及到几个遮盖View，我在写的时候用的是自动布局，后来发现动画和自动布局会相互影响的，我图片的布局一直不对，后来还是使用了手动的frame位置计算，我感觉我还是挺纠结什么时候用自动布局，什么时候就用手算的frame就好，总之就是方便就好。<br>在展示群动态的时候最纠结的就是什么时候展现群动态说明最合适，我想的是希望在群动态内容展现后再将说明展示出来，这里有一个动画的小bug，因为collectionView的reload的时间好像不对，第一次的说明展示开始的时间提前了，会有一种“pa”就将图片展示出来的感觉，没有pop弹动动画，还好我眼尖！最近又纠结了，喜欢抠细节。<br>给约赛校对了之前section实现边框的代码，我在多个自定义cell中都是复制黏贴的方式将重复代码整合进去，现在想想也是too young too simple！我怎么就没有想到说用继承或者categray分类呢，就傻傻的用最笨的方法实现，没有考虑封装和优化代码。之前没有这种封装意识，我就有点反应不过来，约赛说第一个字后就知道该怎么做了，唉….有种问老师程序问题，自己一个人解决不了，但是在老师看问题的时候，自己放松下来，用第六感就知道问题可能是出在哪里了！<br>现在我写代码，想的比较多的是方法放在哪里比较好，如果将来要复用该文件或代码，我怎么写会比较好，还是没有深入考虑到说多个单独的文件，我自己连接起来，共有代码，将复用最大化，只是机械的完成工作，果然是码代码的程序猿啊！<br>有两种方案：继承和分类，本来想说分类更好一点，只要在UIView中添加创建边框的方法就可以了，collectionViewcell和tableViewCell都可以使用，不用写两套边框线实现的代码了，但是分类本来是不允许添加成员变量的，虽然有第三方的帮助能在程序运行时改变分类实现该缺陷，但是实际过程中还是不断的会出现问题，什么野指针的crash，就不是很稳定，我还是弃用了，用了继承，分类还有一点要注意，不能重写系统方法，只能添加自己的方法，我傻傻的还是在init或者在awake什么的初始化，想说，反正都有[super …],但是这样做是不对的，还是要遵守规则的！</p>
<p><a href="http://chesterlee.github.io/blog/2014/08/24/ios7zhong-ui-trick/" target="_blank" rel="external">http://chesterlee.github.io/blog/2014/08/24/ios7zhong-ui-trick/</a></p>
<p>post/ get</p>
<h3 id="5月3号"><a href="#5月3号" class="headerlink" title="5月3号"></a>5月3号</h3><p>今天看了约赛写的发布群动态的布局，我发现了之前我没有想到、用到过的方法，collectionView和tabelView都有自带的didSelect / deseleced代理方法，我之前在处理cell中的点击效果的时候用的都是自己写的UIButton,也能实现一样的效果，但是我看完范例代码后就好想把之前选择目的地的collectionView的点击效果实现换掉，后来在增加“加群可以不审核”功能的时候刚好可以演习一下，之前在做点击和再次点击取消效果，都是在didSelect方法中做的，再添加一个标记的参数，来区分重复点击，当然有需要的话要使用allowsMultipleSelection实现多选的效果，现在就用didSelect / deseleced各司其职，逻辑看上去干净一点，真理在于实践啊。</p>
<p>因为之前也有发布图片和文本的视图，现在要添加tags标签的选择，要是我的话可能就傻傻的去重新也一个新的啦，哈哈，但是这里有更好的方法，因为标签View在底部，可以将之前发布View的底部约束连线出来，添加标签页的时候设置底部的垂直距离变大，再将Tags添加上去，做左、右、下的自动布局约束，perfect！思维非常人所能及啊！</p>
<p>之前在纠结View的起始点是0还是64的时候，用edgesForExtendedLayout属性的UIRectEdgeBottom完美的解决了UINavigationController或UIToolbarViewController引起的高度问题，但是有欠缺的地方，edgesForExtendedLayout指的是边缘的延展布局，当我选择UIRectEdgeBottom对底部进行延伸的时候，其实会修改ScrollView的ContentInsect，导致了我的标签ScrollerView可能上下拖动，其实是不可以的，<a href="http://chesterlee.github.io/blog/2014/08/24/ios7zhong-ui-trick/" target="_blank" rel="external">automaticallyAdjustsScrollViewInsets</a>属性能解决改问题，不需要主动的调整ScrollerView的ContentInsect。</p>
<p>还有post和get的问题要强调一下，我也是脑子锈了，之前其实问过这个问题了，因为在打印json数据的时候，我也习惯就打 “po operation.request”,这个是用在get方式的http请求,我用get的方式去查看post，一定是会出现404 参数错误的问题的，现在就是获取数据用get，当数据较大，需要上传修改数据的时候用post，确保安全性，get方式是不会“破坏”服务端的，但是post是带参的在httpBody中，所以……</p>
<p>从前有个小和尚，老和尚再给小和尚讲故事。。。。。。。</p>
<h3 id="5月8号"><a href="#5月8号" class="headerlink" title="5月8号"></a>5月8号</h3><p>之前在使用block方法的时候主要是用作property,能在外面调用cell中得某个动作,现在在整理的代码的时候会考虑到优化和复用,为了避免重复的代码,会整合到一起,第一想到的就是用普通的全局方法了,但是有的时候如果只有2.3行的话我又不是很想封装,这里我是这么想得,什么时候用区部的block方法,什么时候用全局的方法,当在某个方法中需要多次使用相似的代码,其他方法用不到的情况下,我就选择使用声明一个区部block方法,当其他方法也需要使用的时候就直接声明全局方法,我之前使用block还是比较局限的.</p>
<p>在做”选择图片”功能时差点又犯了之前ios7crash的问题,我都是直接用UIAlertController来展示选择提示框的,ios8是没有问题的,但是ios7中是没有的,会造成crash,得知真相的瞬间我也crash了,我好像之前一直都使用UIActionsheet或者UIAlertSheet什么的,没有意识到这个问题,解决方案就是使用NSClassFromString来判断UIAlertController是否可用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NSClassFromString(@&quot;UIAlertController&quot;)</span><br></pre></td></tr></table></figure></p>
<p>是优先使用UIAlertController的,其他情况下再使用第三方的PLActionSheet,能实现和UIAlertController一样的效果.现在是用公司的iPhone4测试机在测试ios7系统,我还以为是是4的问题呢,还好发现了.</p>
<p>不知道为什么平时做完,检查的时候也没发现那么多的问题,怎么每次一到要发布的时候就会好多的问题,想想也是醉了!</p>
<h3 id="5月14号"><a href="#5月14号" class="headerlink" title="5月14号"></a>5月14号</h3><p>最近我感觉自己的状态不是很好，可能是毕业季了，有点烦躁，再加上牙齿的病灶，更是火上浇油，我要尽快的调整过来<br>今天上午先是将西安、成都、丽江重新打包，itunes上的图片上传，提交的重任就交给约塞了！本来是想研究一下tagListView的范例代码的，但是新建了swift项目，添加了tagListView.swift文件，但是就是有问题，我就草草的看了一下，主要是对tagView样式的修改，我自己写的tagView之前使用笨笨的计算位置的方式添加tag的，我仿造之前约塞的用preobject的方式来计算下一个tag对象的位置，可能是减少了多余的计算，代码看上去干净一点，当然其中有一些我稍稍花了一点时间在布局tag的换行和计算tagView的高度上，永远的坑啊，明天再看吧，拔完牙有点疲惫，这件事后一定要提醒自己一定要保护牙齿啊！<br>之前东京帮我找出的在动态分享处的一个bug，如果删除其中的动态后，该标签下的列表为空的话，后台就没有传改tag过来了，但是我这边有一个下划线和pageViewcontroller还是停留在之前的状态，会出现下划线上没有tag文本的情况，之前还真没有测试到，最让我心累的是，我总是没有办法考虑周全一点，还是犯的错不够多啊，做的时候发现不了bug，一到发布就层出不穷。我今天上午就试着按约塞提示的做个通知，我在删除状态后如果列表是空，就post个通知，使得tag回到“全部”，包括pageviewController，但是我试了好多种方式，我感觉我是不清楚pageviewController的工作原理，总是会出现不应该在pageviewController上出现的View,好吧，中午的时候还是交给约塞帮我解决了。<br>今天下午出现了个小bug，之前在做DashBoard的时候，ScrollerView的contentSize计算的时候忘了小心小数点了，导致现在偶数的特惠推荐时能正确滑动的，但是奇数就会少，可以使用Math.h的数学函数ceil，是向上取整的，能确保奇数也是OK展示的！</p>
<h3 id="5月15号"><a href="#5月15号" class="headerlink" title="5月15号"></a>5月15号</h3><p>1.工作：</p>
<p>群动态告一段落了，要开始目的地扩展了，下午的时间比较紧，就在首页先做哪个搜索栏，我没想那么多，想说就是UISearchBar放在n导航栏中，因为不是和UISearchDisplay一起使用的效果，是直接跳换的，所以就直接添加一个UISearchBar好了，可以在样式修改的时候才发现系统提供的UISearchBar有很多限制的，这次Vivian设计的不想之前的就是白底黑字的，是其他的样式包括圆角，我换了好几种方式这里有几个折腾了好久</p>
<ol>
<li>圆角：我之前都是通过layer的方式做圆角的，在UISearchBar中好像不起作用，好像也没有系统定义的样式可以实现圆角，网上的做法是在外面套了一个view，实现圆角</li>
<li><p>背景颜色：最纠结的事背景颜色了，是没有提供backgroudColor的属性的，只有backgroudimage,但是因为这个跟Vivian要颜色图片好像有点小题大做，所以自己先折腾了。本来想说那自己做一个UISearchBar的效果好了，反正只是点击跳转的功能，但是发现后面的设计UISearchBar都是这样的，为了和UISearchDisplay配合工作，还是乖乖的使用系统的UISearchBar吧，这里使用的方法是，得到UISearchBar里面结构的UITextField,手动的修改背景颜色，这里比较纠结的是需要设置barTintColor后, 才能拿到UISearchBarTextField对象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">searchBar.barTintColor = [UIColor colorWithHex:@&quot;#3FA6E6&quot;];</span><br><span class="line">UITextField *searchTextField = [[[searchBar.subviews firstObject] subviews] lastObject];</span><br><span class="line">searchTextField.backgroundColor = [UIColor colorWithHex:@&quot;#3FA6E6&quot;];</span><br></pre></td></tr></table></figure>
</li>
<li><p>默认字体颜色：这个placeholder的字体也纠结我好久，我就奇怪了，之前怎么没有遇到过这样的问题，网上更多的方式是用key的方式解决的，但是这边不起作用，但还好UITextField自己有提供属性改变默认字体</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">searchTextField.attributedPlaceholder = [[NSAttributedString alloc] initWithString:@&quot;想去哪里?输入国家/目的地&quot; attributes:@&#123;NSForegroundColorAttributeName:[UIColor whiteColor]&#125;];</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>2:学习：</p>
<p>新的阶段要有新的目标和学习方式，又重新拾起来之前的课外学习视频了，又一次听到MJ老师的声音真是激动万分啊，草草了看了一下目录，学习了一下其中感兴趣的部分</p>
<ol>
<li><p>UIDynamicAnimator仿真模拟器感觉很好玩的样子，看了一下能使用到一些简单的动画效果上，有点像那个水滴刷新的感觉。</p>
</li>
<li><p>侧滑菜单：主要是用到了pan手势和transform的平移方式 思路是用一个总的控制器装UITableViewController和UIViewcontroller,将其作为子控制器，addChildViewController,主要是因为addview的时候使用的是局部变量</p>
</li>
</ol>
<h3 id="5月21日"><a href="#5月21日" class="headerlink" title="5月21日"></a>5月21日</h3><p>体测补考的重头戏也完成了，照片也拍了，在学校的事务差不多都解决了，就剩下毕业典礼了，太久没有上班了，Xcode都和我生疏了，上午因为缓存的问题，浪费我好多的时间调试，之前也因为缓存的问题吃了不少亏！真是不长记性啊看来以后一旦有什么不解之谜，都有先试试clear了！</p>
<p>今天的目的地搜索界面，做的差不多了，就差历史缓存数据和搜索界面页面了，再来调整一下交互什么的，临近下班我遇到的UISearchDisplayController的难题就是，改了交互，搜索结果不是实时显示了，在点击键盘的搜索按钮后在显示搜索结果，因为UISearchDisplayController的delegatede特性，当输入文本后就会call代理方法，因为没有和之前一样，从数据库中过滤数据，所以会显示：no result,只有在点击搜索后，我才会在代理方法中去调网络请求，会有数据显示，但是我感觉no result这样的显示效果体验不太好，给用户一种没有搜索数据的感觉，明天要弄弄这个问题，虽然下午已经找了一会儿资料了</p>
<p>不过搞笑的是，今天去牙医那里复诊，发现自己实在太搞笑了，因为太小心了，又有点害怕伤口，就没有仔细看牙创口，原来我一直以为的肿块，只是我没有把棉签给拿掉，而且医生把棉签弄的太牢了，我咬了那么多天都没有掉下，牙医看到都醉了！说我实在太老实！唉，自己的小心，自尝后果啊，还要重新上药，一句话：不要害怕面对伤疤，揭开好像也没有想象的那么糟糕。</p>
<h3 id="5月23日"><a href="#5月23日" class="headerlink" title="5月23日"></a>5月23日</h3><p>最近一直和UISearchBar过不去,因为要自定义UISearchBar样式有一点麻烦,但是结果这几天的练习,能实现扩展目的地中的搜索条的效果,期间有模糊的在网上找解决方式,发现还是要解剖UISearchBar结构来实现自定义UISearchBar,得到我想要的样式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UISearchBar-&gt;UIView-&gt;</span><br><span class="line">UISearchBarBackgroup(UIImageView)</span><br><span class="line">UISearchBarTextField(UITextField)-&gt;</span><br></pre></td></tr></table></figure></p>
<p>结构是这样的:</p>
<ol>
<li>UISearchBarTextField: 可以来设置输入框的背景,字体颜色,默认字体,通过layer可以做圆角,这里要注意的是想要设置barTintColor,才能获得UISearchBarTextField</li>
<li><p>UISearchBarBackgroup: 如果不需textField外多余的View,可以选择将其删除,因为这个是用来做UISearchBar的backgroundImage,如果不对其做操作,上下会有很奇怪的边缘线,barTintColor实际上也是在给UISearchBarBackgroup修改背景颜色,但是不能解决边缘线的问题,我的解决方式就是remove,从根本解决问题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[[searchBar.subviews objectAtIndex:0] subViews]firstObject]</span><br></pre></td></tr></table></figure>
</li>
<li><p>当UISearchBar是位于navController中的时候,有特殊情况,如果要修改样式,貌似只要注意一下UISearchBarTextField,没有多余的UIView了,这样也方便很多</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">    UINavgationBar-&gt;UISearchBarTextField.....</span><br><span class="line">```       </span><br><span class="line">4. UISearchBar的高度是固定的28px,而UISearchBarBackgroup是44px</span><br><span class="line"></span><br><span class="line">终于能&quot;随意&quot;的操作UISearchBar,仔细想想也是美美的!</span><br><span class="line"></span><br><span class="line">### 5月26号</span><br><span class="line"></span><br><span class="line">这几天在做目的地拓展的时候，弄的有点小烦躁，因为接口的问题，借口的字段换了，但是需求是在之前的基础上增加的，而不是重新做，特别的分精品攻略和拓展目的地，我感觉我浪费了很多的时间纠结这个问题，在和东京问接口字段的用途的时候偶然发现的，然后找Vivian好好的了解了一下他们两者的区别，瞬间觉得原来我一直都没有好好的“深入“啊，哦对，还有poi和pin的区别，瞬间觉得后台真的事好大的一个工程啊，现在在换接口的时候也耗费了很多的时间，因为字段名都不同了，参照的方法就是字段名转换了，能暂时解决问题，但是心里总是不踏实，总是感觉会有问题。还有就是一直纠结我的clientName的问题，原来在拓展目的地中不会出现特惠推荐和发现新奇等等用到clientName的接口字段，还好一直纠结好久呢，不过这也是我不好好听Vivian“上课”的结果，要好好的反省一下，听懂需求，避免浪费时间啊，还有boardID等关键性的目的地需要用到的字段，在看了约塞写下载zip包代码的时候发现原来还有可以取到AllBoard的接口，在appdelegate中有做，并且已经可以获取CurrentBoardModel什么的当前目的地的字典了，我只需要“善加利用”,dashboardViewController中现阶段的困难就能解决了，这几天有点小小的烦躁，明天的任务就是把目的地页的搜索加上，在完善categoryList的分页功能完成</span><br><span class="line"></span><br><span class="line">### 6月2日</span><br><span class="line"></span><br><span class="line">昨天花了点时间折腾首页的群动态的样式，我一开始觉得挺简单的，也就是那么几个控件，但这里要注意的是，当没有来自群消息的时候需要将那一行隐藏掉，并缩短高度，我当时在写代码的时候脑子里一直想的是当没有groupName的时候要记得讲高度减掉20！注意，这个就是最后发现问题的最大误区，因为是自动布局嘛，我做这个减20的动作完全是多次一举，难怪在没有来自群组的情况下，contentLabel的高度会变的那么怪，不过这也是因为当时我在连线的时候是将contentLabel和groupView关联在一起的，正确的逻辑应该是和底部的View联系，因为groupView是会需要隐藏的，要改变cell的高度的，所以我的方法是连线了一个contentLabel与View的约束，通过判断是否有groupName来改变高度，这个之前好像没有碰到过，脑子转不过来，稍微纠结了一会儿。</span><br><span class="line"></span><br><span class="line">还有在运行过程中我喜欢多点点，看看有什么预料不到的bug，我发现底部的navbar真的总是乱跳，该隐藏的时候不隐藏，对有点强迫症的我来说，真的很难忍受啊，希望之后能修正过来！</span><br><span class="line"></span><br><span class="line">之前在做视频iPad的时候，发现searchbar与searchDispalyController配合在iPad中不适应，用了优化，后来我发现只要searchbar不是显示在导航栏中，其实是可以和iPhone一样正常使用的，只有</span><br></pre></td></tr></table></figure>
<p> displaysSearchBarInNavigationBar ＝ yes</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">的情况下才需要进行优化操作。</span><br><span class="line"></span><br><span class="line">##6月17号</span><br><span class="line"></span><br><span class="line">临近发布了啊，紧急修改bug中，这几天还算游刃有余，没有什么今天解决不了，明天预留的问题，除了三个问题，等约赛回来解决：</span><br><span class="line"></span><br><span class="line">    1. 主攻略分享后职能返回到首尔等等分攻略，不返回主攻略</span><br><span class="line">    2. 分享后第二次点击不可用</span><br><span class="line">    3. 新浪分享不可用</span><br><span class="line"></span><br><span class="line">1. 在修改目的地相关的分享链接的时候，发现自己有点钻牛角尖了，我有的时候代码敲的久了就很容易固定思维，我的潜意识一直告诉我：拓展目的地页是pin，精品是poi是简单的,其实是相反的，我在修细节的时候就一直钻啊，怎么才能区分并提供不同的分享链接呢，真相就是我想多了。</span><br><span class="line">由于在分享中接触到了app之间跳转的问题，可以去看看app之间跳转的[原理](</span><br><span class="line">http://blog.csdn.net/lc_obj/article/details/38128557)</span><br><span class="line">看了一下，在plist文件中的URL type很有用啊，通过URL Schemes字段作为app的特殊表示，能提供app之间的相互跳转，数据交互之类的，最直接的实现就是在Safari中输入URL Schemes://能直接跳转到应用App，瞬间高大上啊，例如:</span><br></pre></td></tr></table></figure>
<p> 微信是weixin://<br> 淘宝taobao://<br> 点评dianping:// dianping://search<br> 微博 sinaweibo://<br> 名片全能王camcard://<br> weico微博weico://<br> 支付宝alipay://<br> 知乎zhihu://<br> 优酷 youku://</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">2. UIAlertController iPad特性：之前在iPhone中测试是没有问题的，在做ipad适配的时候发现crash了，之前都没有发现，检查了代码，发现时我之前一开始接触UIAlertController的时候少关注了对iPad进行适配的部分代码，这里要说的是UIAlertView、UIActionSheet在iOS8中已经被丢弃了，这里要添加的代码是：</span><br><span class="line">```                   </span><br><span class="line">    [alertController setModalInPopover:NO];</span><br><span class="line">    [alertController setModalPresentationStyle:UIModalPresentationPopover];</span><br><span class="line">/*点击弹出对话／选择框的对象*/                    </span><br><span class="line">    UICollectionViewCell *cell = [self.collectionView cellForItemAtIndexPath:indexPath];</span><br><span class="line">    alertController.popoverPresentationController.sourceView = cell;</span><br><span class="line">    alertController.popoverPresentationController.sourceRect = cell.bounds;           </span><br><span class="line">```              </span><br><span class="line">setModalInPopover:将popover忽略其边界以外的事件，直到它被设置为NO，YES:点击边界外区域，弹出View消失。</span><br><span class="line">setModalPresentationStyle:设置模态视图弹出关闭动画，但是我感觉没有什么区别的感觉          </span><br><span class="line">3. ActionSheetPicker ipad特性：之前做时间选择的时候直接是黏贴代码的，将关键点修改就可以了，没想到为将来埋下了坑，senie在检查代码的时候发现iPad中时间选择不能正确的显示，iPhone中显示正常，找到的解决方案是按作者说的讲第三方库中的某条代码直接修改了，这样不太好，应该有别的解决方法，在看了一下那个[提问和作者的解答](https://github.com/skywinder/ActionSheetPicker-3.0/issues/156)</span><br><span class="line">后,发现应该是提问者忽略了一个参数，作者是在帮助引导找到问题所在，**Origin**表示的的是触发ActionSheetPicker的对象，第三发库会自动适配时间选择的位置，之前错误的代码Origin赋值的是self.view，可想而知结果了。</span><br></pre></td></tr></table></figure>
<pre><code>- (instancetype)initWithTitle:(NSString *)title
       datePickerMode:(UIDatePickerMode)datePickerMode
         selectedDate:(NSDate *)selectedDate
            doneBlock:(ActionDateDoneBlock)doneBlock
          cancelBlock:(ActionDateCancelBlock)cancelBlock
               origin:(UIView*)origin
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 6月24日</span><br><span class="line"></span><br><span class="line">在做booking内容需求的时候，当时看到效果图就去看了安卓的模版，瞬间觉得高大上啊，因为我自己知道动画方面我一直是弱势的，我记得我之前还是很会找网上的别人做好的特别的效果的，意识还是有的，不知道为什么，渐渐的这个意识就消磨了，感觉日常的工作没有用到很难的效果，都是很实在的需求，还是上次亚丁给的提示我才找回了感觉呢，这次果断去找现有代码啊，关键词“滑动选择”之类的，在github中找了几个，其中有一个很像的，感觉就是量身定做啊，只要稍微改一下位置和UIImageView就可以，效果是能做出差不多的，我就是这个毛病，爱钻牛角尖，是多少px就是多少px。做好View花了一点时间的，因为他里面的subView布局还是有点多的，最难的还是逻辑上的处理，因为这边不是一次性的，用户很可能多多次打开筛选，也有多次打开，但是不筛选的情况，总而言之，就是要保留上次的筛选条件，情况可以分为以下几种：</span><br><span class="line"></span><br><span class="line">    1. 之前没有筛选条件：筛选，点击确定开始筛选</span><br><span class="line">    2. 之前没有筛选条件：筛选，点击边缘，退出筛选View</span><br><span class="line">    3. 保留筛选条件：筛选，点击确定开始筛选</span><br><span class="line">    4. 保留筛选条件：筛选，点击边缘，退出筛选View</span><br><span class="line">    5. 用户筛选后清空当前的筛选条件</span><br><span class="line">    6. 打开，展示上次的筛选条件</span><br><span class="line"></span><br><span class="line">当时还挺纠结的，一开始没有考虑那么深入，在参考了安卓之后，发现这个问题还是很重要的，app没有bug就给会给作为用户的我一种很严谨，是个好app的感觉，所以昨天晚上在做好上面情况的初步效果之后，早上就好好的针对多个情况进行仔细的测试，因为这边用的滑动选择是别的作者做的简单展示滑动效果代码，有很多要补充的逻辑，我自己添加的有：</span><br><span class="line"></span><br><span class="line">    1. 清空筛选：使得两端的滑动Item回到初始位置</span><br><span class="line">    2. 还原位置：根据相应的range，使两端Item滑动到特定的位置</span><br><span class="line"></span><br><span class="line">这次做的界面我感觉是比之前做的要复杂很多，到不是因为子控件，因为逻辑实现上涉及到很多的值，就显得复杂了，主要还是要仔细，但我感觉之后可能还是会发现意想不到的问题吧。</span><br><span class="line"></span><br><span class="line">因为这次的列表做的分页，其中要配合用户玩意在中途想筛选的话，要重新刷新界面，包括对tableview滑动到顶部的动作，这里我差点有忘了一条代码：</span><br></pre></td></tr></table></figure>
<p> [self.navigationController.navigationBar setTranslucent:NO];</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">没写的话点击cell后返回，tableview会向上移动64px的，不管导航栏，因为tableview中UIScrollerView的特性。</span><br><span class="line"></span><br><span class="line">### 6月25日</span><br><span class="line">今天是继昨天之外，对入住、离开日历选择第三方库的修改，我感觉我找不到跟安卓类似的CalendarListView,就找了个类似的多选日历的第三方封装好的，但是纠结的是作者居然没有做适配！可怜的我啊，一点一点的改，这个还是有点复杂的，我感觉和日期碰上的都挺复杂的，这边我在适配的时候最纠结的就是对图片的拉伸</span><br></pre></td></tr></table></figure>
<p> UIImage resizableImageWithCapInsets</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这个方法用上去其实挺简单的，之前就有所接触，但是不知道为什么，总是用不到要领，这里总结一下</span><br></pre></td></tr></table></figure>
<p> UIEdgeInsets UIEdgeInsetsMake(CGFloat top, CGFloat left, CGFloat bottom, CGFloat right)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这边我用UIEdgeInsets的时候总有个误区，这边的top,left,bottom,right的值就是对应边界的距离，在处理UIButton的imageContent和titleContent的时候，还是很顺的，潜意识在处理right和bottom的值的对应关系是正确的，imageContent的right对应的就是右边到titleContent的距离嘛，还是很好理解的，但是到了这边截取单个image Insets的时候，就是缓不过来脑子，其实右边就是右边，底部就是底部，那么**UIEdgeInsetsMake获取的区域**特别注意的是**用来平铺，补充图片长宽不够的部分**，一般就留取1px的长宽</span><br></pre></td></tr></table></figure>
<p> UIEdgeInsetsMake(0, 1, 0, 1)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">这边要注意的是图片在不规则，不对称的情况，我这次就被坑了，那个库的原图左侧居然有10px的空白，我说怎么UIEdgeInsetsMake无论怎么计算在填充的时候总是有空白呢，一仔细查看图片发现被坑了，一度怀疑resizableImageWithCapInsets是不是这样使用了，本来就对resizableImageWithCapInsets使用不是很有把握的说.</span><br><span class="line"></span><br><span class="line">这里有一个问题要补充一下，之前碰到视图的起始位置不正确，如向上便宜64px或者向下偏移20px，我都是铜通过设置导航栏的模糊效果Translucent和self.edgesForExtendedLayout来解决的，多试几次参数一定是正确的，也没错啦，但是这里要补充的是</span><br><span class="line"></span><br><span class="line">1. 当navigationBar隐藏时，滚动视图会给我们的内容预留部分的空白Top（所有内容向下偏移20px，因为状态栏的存在），这里不需要修改self.edgesForExtendedLayout，一般我做就是设为None,表示不要自动布局边界，起初从（0，0）开始，那这里更加合理的做法是设置</span><br></pre></td></tr></table></figure>
<pre><code>self.automaticallyAdjustsScrollViewInsets = NO;//自动滚动调整，默认为YES
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">取消自动滚动调整。</span><br><span class="line"></span><br><span class="line">2. 当出现滚动视图上移64px的情况的时候，一般就是直接设置</span><br></pre></td></tr></table></figure>
<p> self.navigationController.navigationBar setTranslucent:NO]</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">取消模糊效果，因为当YES的时候，对滚动视图来说，因为需要向上滑动能看到模糊效果，有64px的insets的大小，不会存在向上移动64px错位的感觉，但是就单View视图来说，是没有64px的insets的，所以回事从起始（0，0），开始，视觉上是这样的，所以需要讲Translucent设为NO，自动将你的整个View都往下偏移64px，这样理解就比较完整了。</span><br><span class="line"></span><br><span class="line">[参考链接](http://www.cocoachina.com/bbs/read.php?tid=280826)</span><br><span class="line"></span><br><span class="line">#### 6月26号日报</span><br><span class="line"></span><br><span class="line">这周的工作就告一段落了，又是一个美好的周末啊，还有我最爱的小甜馨，就像约赛说的下班周末休养生息，上班蓄势待发啊。</span><br><span class="line"></span><br><span class="line">今天遗留的就是手机号码绑定的问题了，因为接口还没有准备好，只能先做准备工作了，先带上塞纳把界面给做了，这里有个定时器的知识点，之前在做目的地页改版的时候就有做过了，还有就是这个需求手机验证码发送倒计时是很普遍的，我之前在做毕设的时候就做过了，不知道为什么，每次使用NSTime就有种很不安的感觉，总是觉得没有使用到要领，这里总结一下吧，免得下次忘了，不长记性，东西不用就很容易忘</span><br><span class="line"></span><br><span class="line">其实定时器NSTimer我最常用的就是scheduledTimerWithTimeInterval方法了，比较简单，不用添加主线程什么的。</span><br><span class="line"></span><br><span class="line">步骤如下：</span><br><span class="line"></span><br><span class="line">1. 这里要注意的出了设置事件接受的方法外 respeat 参数了，即是否重复调用事件</span><br><span class="line">```       </span><br><span class="line">    [NTimer scheduledTimerWithTimeInterval:timeInterval     target:self selector:@selector(startTimer)  userInfo:nil repeats:NO];</span><br><span class="line">```        </span><br><span class="line">2. 在响应方法中进行一系列的逻辑处理后，respeat设为YES后，会重复的调用，直到执行invalidat方法，这里是stop,stop != pause,表示的是该定时器被销毁了，这里要特别注意的是要赋值为nil，因为release并不是及时的，可能会有延迟，为了出现内存crash的问题，需要我们手动nil，确保内存清空了。可以添加判断 timer isValid</span><br></pre></td></tr></table></figure>
<pre><code>[timer invalidate];
 timer = nil;
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">3. fireDate，这个可以设置出发的时间，不过现在还没有用到的地方</span><br><span class="line">4. fire，这个参数也是造成我对定时器一直恍恍惚惚的地方，fire在使用的时候要注意对repeats的影响，fire的功能是提前触发定时器，但是不会影响定时器原来的定时计划，只是会在fire点击后多出额外的响应次数，如果repeats设为YES，方法如果计划点击10次后销毁定时器，那么执行一次fire增加一次方法执行，如果repeats为NO，那么fire执行后是算在那一次的定时触发计数里面的，只会响应方法只会被执行一次，之后就被销毁了。这个很重要，虽然现在用到的都是定时触发，以后用到手动触发的时候要注意该知识点。</span><br><span class="line"></span><br><span class="line">昨天发生了一件我为我自己的英语智商捉急的事情，因为Xcode重新安装升级后原本的插件不能使用了，我安装完后，重启Xcode，顶部是有提示的，我一项都是遵循“建议”的，这下好了，我完全没有意识到我自己选了“skip bundle”，我说怎么安装了插件没有效果呢，等我回家空下来了，回去的电脑一试，重新安装，仔细一看！“skip”不是跳过的意思吗？bundle应该是指那个插件的包了，好吧，原来是“load”和“skip”啊，闹了一个大笑话，那天还是因为那个iOS安装证书也是有这个我“遵循建议“的问题，导致的证书重新申请造成之前的证书无效的大bug呢，我只有呵呵了。</span><br><span class="line"></span><br><span class="line">### 6月29日</span><br><span class="line"></span><br><span class="line">今天在了解手机绑定需求的时候，了解了一下中文排序，之前也是使用了第三方的中英文字母序列表的，因为iOS不会按照中文的拼音进行排序，但是能采用NSString的localizedCompare，按笔划排序，这个也是牛逼的，纠其原因是因为Ios默认使用utf-8格式编码，这里看了一下网上资源，游发现一个George牛人写的函数pinyinFirstLetter，能得到中文字符的首字母，方法也很简单，我的理解就是按照utf-8格式编码原理得到了一个中文与字母之前的差值</span><br></pre></td></tr></table></figure>
<p> #define HANZI_START 19968<br> #define HANZI_COUNT 20902</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">就靠这个，进行中英文之间的转换，再通过NSSortDescriptor按排序参数来对数组进行排序，NSArray本身不不具备排序功能的。</span><br><span class="line"></span><br><span class="line">vim好难啊，都不知道还有那么多模式的，难怪我在insert模式下怎么输入:wq按回车都没有反应，气死我了。。。。。我在搜索网上资源的时候，一般都直接copy命令，所以也会直接执行sudo，这样我创建的文件可能就没有删除或者编辑权限了，弄的我都不敢轻举妄动啊。上午的时间一点浪费了啊，不过下午在放弃挣扎后，约赛帮我下了一个超级好的开发工具啊，我再也不用纠结vim了，codeRunner。下午就看语法了，就先在w3school上学习了，先入个门，因为我看的还是仔细的，大学的计算机语言学习给我的经验就是，可能一个句子被我忽略了，以后要在这个盲区栽很多跟头，在练习敲代码的时候，发现w3school还不是很全面的，都是范范.</span><br><span class="line"></span><br><span class="line">临近4、5点吧，任务就开始多起来了，我的目标是先把商品购买样式先改了，我感觉poiDetailViewController的布局有点怪怪的，cell之间的灰色分割线也是一个cell，我感觉直接用header活着footer就好了，在修改的时候还纠结了一下呢，找个时间要把这个代码修一下。最后我觉得我最大的问题就是trello中的push通知问题的修改了，之前没有接触过，觉得高大上啊，要好好的琢磨琢磨。</span><br><span class="line"></span><br><span class="line">### 6月30号</span><br><span class="line"></span><br><span class="line">完美啊，再次的感叹一下吧。首先先说明一下吧，昨天完成样式修改后，早上到了先完善一下布局，包括“送红包”这个细节，才能算真正的完成该一需求，提交代码的那一刻才是真正的完成了，不过闹了一笑话呢，就想把约赛的电脑开个机，提交个代码，发现键盘链接不上，没有用啊，以为是没电了呢，后来运营小伙伴来叫布武来修电脑，说什么自动输入内容了，靠，我一想，不好，链接到另一台电脑上了，结局我也只有呵呵了。后来删除了那台电脑上的蓝牙键盘链接，就好了。</span><br><span class="line"></span><br><span class="line">上午最大的工作是，在自己看了iOS通知机制原理的前提下，请教了步武关于消息push的问题，发现客户端没有自己发push啊，比如点击“关注”按钮后，客户端没有自己发通知，只是调用了后台提供的接口，就知道一定是后台在帮助与苹果服务器在沟通了，果然，我在调试的时候发现因为证书的问题，我不能够在debug模式下用真机测试push，步武用本地php测试模拟向苹果服务器发送push消息请求的过程帮我解决了这个问题，也很详细的帮我解释了工作的原理，我当下庆幸啊，昨天看了半天的php，居然碰上用场了，那一段的php代码在步武讲解的过程中，我都能看懂，理解的，可能要我自己默写出来还是有问题的，嘿嘿。完美啊，在理解的基础上，发现其实只要修改scheme就可以了。这里要注意的就是Token值和.pem证书类型，debug模式下的Token值要和.pem相对应，反之亦然。</span><br><span class="line"></span><br><span class="line">因为这次只是修改跳转的问题，没有真正上手去处理push通知，我的认识还是肤浅的，知道打开push通知会在程序启动的时候触发那个方法，在方法体中提供具体的操作步骤，如果下次有机会自己写一次应该会有更深的认识，我一直秉持实践中出真招，不然就不熟的原测，哈哈。</span><br><span class="line"></span><br><span class="line">这几次提的需求满满的有了深度了，值的是有些知识点我想要回顾一下了，有点健忘啊，像是获取文件位置，文件内容处理等等输出、输入的重点都有点忘了，当初在学校iOS的时候熟悉度还是够的。现在重新扒起来了。</span><br><span class="line"></span><br><span class="line">每个app在iPhone中都是独立的，有对应的沙盒，是封闭的文件中都有四个部分组成.app包和Document、library、tmp，我记得在Xcode还没有升级前，文件结构还是简单的，一找就能找到，但是Xcode升高级版本后，文件结构变的好复杂啊，但是我们使用的主要部分是不变的</span><br><span class="line"></span><br><span class="line">1. 我们在项目中的资源，图片或者一些文件是在在Bundle主包中，都是使用</span><br></pre></td></tr></table></figure>
<p> [[NSBundle mainBundle] pathForResource:@”countrycode”   ofType:@”json”]</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">这样的代码在获取filePath，包括图片的获取路径方式，都是相对路径，文件位置就是在mainBundle中，一般这里存放的是一些工程需要使用到的本地文件</span><br><span class="line">2. Document、library、tmp都是可以存放一些缓存文件、运行中下载，或者在程序运行中需要保存数据的文件。</span><br><span class="line"></span><br><span class="line">这里我一个个的输出文件位置重新去看了一下结构，太神奇了，我发现我根本弄不拎清啊，因为攻略都是一个个的target，有自己的bundle包，我找来找去弄不清楚结构，在电脑模拟器中看和安装在手机中有很大的差别，我现在只能理解成分攻略独立安装就和主攻略当前电脑上模拟器的文件一样这样安慰自己了。。。。</span><br></pre></td></tr></table></figure>
<p> NSString <em>homeDir = NSHomeDirectory();<br> NSArray </em>paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);<br> NSString *cachesDir = [paths objectAtIndex:0];</p>
<p> NSString *imagePath = [[NSBundle mainBundle] pathForResource:@”countrycode” ofType:@”json”];</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">不过我的预感告诉我，这段代码很重要啊！</span><br></pre></td></tr></table></figure>
<ul>
<li><p>(NSURL <em>)bundlePathIsImage:(BOOL)isImage {<br>#if MAP_MODE || SINGLE<br>QGLAppDelegate </em>delegate = (QGLAppDelegate *)[[UIApplication sharedApplication] delegate];<br>if ([delegate hasUpdateContent] ||  delegate.selectedBoard) {</p>
<pre><code>if (isImage) {
    return [QGLUtil cachesDirectory];
} else {
    return APPLICATION_DOCUMENTS_DIRECTORY;
}
</code></pre><p> } else {</p>
<pre><code>NSURL  *bundleURL = [[NSBundle mainBundle] URLForResource: [QGLInfoHelper clientName] withExtension:@&quot;bundle&quot;];
NSBundle *bundle  = [NSBundle bundleWithURL:bundleURL];
return bundle.bundleURL;
</code></pre><p>  }<br>#else<br>   return [QGLUtil cachesDirectory];<br>#endif</p>
<p>}<br>```</p>
<h3 id="7月2号"><a href="#7月2号" class="headerlink" title="7月2号"></a>7月2号</h3></li>
</ul>
</li>
</ol>
<p>今天的脑子好累啊，不过感觉累才有进步，会遇到更多的问题，主动想办法解决，我感觉这次增加的“推荐关注”这一块，弄的我脑子好乱啊，因为逻辑有点绕，理解的时候思路是清晰的，可是写在代码中就是另一回事了，要考虑到会不会对之前的代码逻辑有影响，因为现在的需求不是一个新的、独立的模块，是要镶嵌在app的其中一个运行逻辑顺序中的，所以我纠结了好久，总感觉自己的方法不好，会出现纰漏的，转眼发现我居然快花了大半天的时间弄这个，如果把我今天的时间分成10份:</p>
<ol>
<li>5分的时间在不断的调试和测试推荐关注的展示逻辑</li>
<li>1分在理解注册、登录、启动相关的代码</li>
<li>2分的时间花在测试注册状态下“推荐关注”的逻辑:这里坑爹的问题是，在测试环境下融云只提供100个注册用户的token值,而我在测试的时候好死不死，就让我测到了100以上，一直拿不到token，我就越要测试，进入死循环了，浪费了一点时间，不过好处在于，接触到了融云的部分相关代码。</li>
<li>。。。。。。。。。</li>
</ol>
<p>现在脑子有点拎不清了，我现在要做的是找点逻辑清楚一点的东西做，清清脑，明天早上来，再梳理一下逻辑，优化一下代码，真的超级重要呢，因为很多重要的模块都涉及到了“推荐关注”：首次启动（登录、注册、跳过），加入官方群，个人主页修改旅行时间。。。。。</p>
<p>还有就是我发现做通知有点很危险的感觉，如果逻辑简单，是比用代理要好点，但是一旦逻辑有点复杂了，要考虑到多处的情况，可能会串，一不注意可能会发生预期之外的动作，所以这次我在处理登录、注册情况下试了超多次查看情况。</p>
<p>我感觉我之前嘴巴还是能说的，但是现在就是有种嘴巴里不清，但是脑子清楚的问题了，想想就纠结啊。</p>
<h3 id="7月4号"><a href="#7月4号" class="headerlink" title="7月4号"></a>7月4号</h3><p>这个礼拜好累啊，超级困，但好在这期的需求实现了，trello里面初期的bug修完了，周末也能好好的玩耍了，虽然我周末一直都过的挺舒服的，哈哈。这周因为推荐关注的需求折腾了好久，在代码优化上我是不满意的，想要好好的规整，不过好在因祸得福，在实践中熟悉代码，这里初步接触了融云，主要还是登录、注册这块的，基本上的界面构成、通知、调用都心里有数了，有调整都能很快的抓住重点，包括过场这块的代码，之前没碰过，今天就根据需求修改了一下引导登录</p>
<p>今天还是花了一定的时间修改推荐关注的逻辑啊，总是有步骤上的遗漏，怎么说呢，就好像是发现问题就补一下，先把流程走通，但是这样代码不好看啊，纠结，所以要在自己理清楚思路的情况下，找约赛走一下流程，看看哪里比较严重的纰漏，要改一下。</p>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/12/03/Translucent-TabBar/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          Translucent TabBar
        
      </div>
    </a>
  
  
    <a href="/2015/10/24/long-long-ago/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">long long ago!</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share_jia">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">Share to: &nbsp; </span>
		<a class="jiathis_button_facebook"></a> 
    <a class="jiathis_button_twitter"></a>
    <a class="jiathis_button_plus"></a> 
    <a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
    <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>






<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="wikiri-bao-nei-rong-qian-yi" data-title="wiki日报内容迁移" data-url="https://github.com/chaiweiwei/2015/10/24/wikiri-bao-nei-rong-qian-yi/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"true"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>




</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 ~vivi~
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>